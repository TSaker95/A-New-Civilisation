if (self.CavalryLogger) { CavalryLogger.start_js(["qFA\/M"]); }

__d("AbstractCommentLiveTypingPublisher",["destroyOnUnload"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=10*1e3,h=10*1e3,i=200;a=function(){__p&&__p();function a(){var a=this;this.$1=null;this.$2=null;this.$3=-1;b("destroyOnUnload")(this.destroy.bind(this));window.addEventListener&&window.addEventListener("unload",function(){a.destroy()})}var c=a.prototype;c.destroy=function(){this.$4(),this.$5(),this.$6()};c.handleStartEvent=function(){this.$7()||this.$8(),this.$9()};c.handleStopEvent=function(){this.$4()};c.publishStartEvent=function(){throw new Error("publishStartEvent should be overridden by subclass")};c.publishStopEvent=function(){throw new Error("publishStopEvent should be overridden by subclass")};c.$7=function(){return!!this.$1};c.$5=function(){this.$2&&(clearTimeout(this.$2),this.$2=null)};c.$6=function(){this.$1&&(clearTimeout(this.$1),this.$1=null)};c.$9=function(){var a=this,b=Date.now(),c=this.$3;b>c+i&&(this.$3=b,this.$5(),this.$2=setTimeout(function(){a.$4()},h))};c.$4=function(){this.$7()&&(this.publishStopEvent(),this.$6()),this.$5()};c.$8=function(){var a=this;this.publishStartEvent();this.$6();this.$1=setTimeout(function(){a.$8()},g)};return a}();e.exports=a}),null);
__d("XUFITypingIndicatorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/typing/{feedback_id}/{update}/",{feedback_id:{type:"String",required:!0},parent_comment_id:{type:"String"},update:{type:"Enum",required:!0,enumType:1},session_id:{type:"String"}})}),null);
__d("AbstractCommentLiveTypingXHRPublisher",["AbstractCommentLiveTypingPublisher","ActorURI","ChannelClientID","XUFITypingIndicatorController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(){__p&&__p();function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var c=a.prototype;c.$4=function(){var a=b("XUFITypingIndicatorController").getURIBuilder().setString("session_id",b("ChannelClientID").getID()).setString("feedback_id",""+this.$1);this.$2&&a.setString("parent_comment_id",""+this.$2);return a};c.$5=function(a){a=a.getURI();this.$3&&(a=b("ActorURI").create(a,String(this.$3)));return a};c.buildStartURI=function(){return this.$5(this.$4().setEnum("update","start"))};c.buildStopURI=function(){return this.$5(this.$4().setEnum("update","stop"))};return a}();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c,d){var e;e=a.call(this)||this;e.$AbstractCommentLiveTypingXHRPublisher1=new g(b,c,d);return e}var c=b.prototype;c.getStartURI=function(){return this.$AbstractCommentLiveTypingXHRPublisher1.buildStartURI()};c.getStopURI=function(){return this.$AbstractCommentLiveTypingXHRPublisher1.buildStopURI()};return b}(b("AbstractCommentLiveTypingPublisher"));e.exports=a}),null);
__d("UFIAddCommentLiveTypingPublisher",["AbstractCommentLiveTypingXHRPublisher","AsyncRequest"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c,d){b=a.call(this,b,c,d)||this;b.$UFIAddCommentLiveTypingPublisher1=null;b.$UFIAddCommentLiveTypingPublisher2=null;return b}var d=c.prototype;d.handleStartEvent=function(){a.prototype.handleStartEvent.call(this)};d.handleStopEvent=function(){a.prototype.handleStopEvent.call(this)};d.publishStartEvent=function(){var a=this;if(this.$UFIAddCommentLiveTypingPublisher1)return;this.$UFIAddCommentLiveTypingPublisher2&&(this.$UFIAddCommentLiveTypingPublisher2.abort(),this.$UFIAddCommentLiveTypingPublisher2=null);var c=this.getStartURI();this.$UFIAddCommentLiveTypingPublisher1=new(b("AsyncRequest"))().setURI(c).setMethod("POST").setFinallyHandler(function(){a.$UFIAddCommentLiveTypingPublisher1=null});this.$UFIAddCommentLiveTypingPublisher1.send()};d.publishStopEvent=function(){var a=this;if(this.$UFIAddCommentLiveTypingPublisher2)return;this.$UFIAddCommentLiveTypingPublisher1&&(this.$UFIAddCommentLiveTypingPublisher1.abort(),this.$UFIAddCommentLiveTypingPublisher1=null);var c=this.getStopURI();this.$UFIAddCommentLiveTypingPublisher2=new(b("AsyncRequest"))().setURI(c).setMethod("POST").setFinallyHandler(function(){a.$UFIAddCommentLiveTypingPublisher2=null});this.$UFIAddCommentLiveTypingPublisher2.send()};return c}(b("AbstractCommentLiveTypingXHRPublisher"));e.exports=a}),null);
__d("UFI2LiveTypingBroadcastMutation_StartMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"FeedbackStartTypingData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"feedback_start_typing",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"FeedbackStartTypingResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"feedback",storageKey:null,args:null,concreteType:"Feedback",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"UFI2LiveTypingBroadcastMutation_StartMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"UFI2LiveTypingBroadcastMutation_StartMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"UFI2LiveTypingBroadcastMutation_StartMutation",id:"1936056526467047",text:null,metadata:{}}}}();e.exports=a}),null);
__d("UFI2LiveTypingBroadcastMutation_StopMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"FeedbackStopTypingData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"feedback_stop_typing",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"FeedbackStopTypingResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"feedback",storageKey:null,args:null,concreteType:"Feedback",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"UFI2LiveTypingBroadcastMutation_StopMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"UFI2LiveTypingBroadcastMutation_StopMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"UFI2LiveTypingBroadcastMutation_StopMutation",id:"1391655900936493",text:null,metadata:{}}}}();e.exports=a}),null);
__d("UFI2LiveTypingBroadcastMutation",["ChannelClientID","RelayModern","UFI2LiveTypingBroadcastMutation_StartMutation.graphql","UFI2LiveTypingBroadcastMutation_StopMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("UFI2LiveTypingBroadcastMutation_StartMutation.graphql")},i=function(){return b("UFI2LiveTypingBroadcastMutation_StopMutation.graphql")};function a(a,c,d,e){d={input:{actor_id:d.actorID,feedback_id:d.feedbackID,session_id:b("ChannelClientID").getID()}};a={mutation:a?h:i,onCompleted:e,variables:d};var f=g(c,babelHelpers["extends"]({},a));return{dispose:function(){f&&f.dispose(),f=null}}}e.exports={start:a.bind(null,!0),stop:a.bind(null,!1)}}),null);
__d("UFI2LiveTypingBroadcastPublisher",["AbstractCommentLiveTypingPublisher","UFI2LiveTypingBroadcastMutation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c,d){var e;e=a.call(this)||this;e.$UFI2LiveTypingBroadcastPublisher1=b;e.$UFI2LiveTypingBroadcastPublisher2=c;e.$UFI2LiveTypingBroadcastPublisher3=null;e.$UFI2LiveTypingBroadcastPublisher4=null;e.$UFI2LiveTypingBroadcastPublisher5=d;return e}var d=c.prototype;d.destroy=function(){this.$UFI2LiveTypingBroadcastPublisher3&&this.$UFI2LiveTypingBroadcastPublisher3.dispose(),this.$UFI2LiveTypingBroadcastPublisher4&&this.$UFI2LiveTypingBroadcastPublisher4.dispose()};d.handleStartEvent=function(){a.prototype.handleStartEvent.call(this)};d.handleStopEvent=function(){a.prototype.handleStopEvent.call(this)};d.publishStartEvent=function(){var a=this;if(this.$UFI2LiveTypingBroadcastPublisher3)return;this.$UFI2LiveTypingBroadcastPublisher4&&(this.$UFI2LiveTypingBroadcastPublisher4.dispose(),this.$UFI2LiveTypingBroadcastPublisher4=null);var c=function(){a.$UFI2LiveTypingBroadcastPublisher3=null};this.$UFI2LiveTypingBroadcastPublisher3=b("UFI2LiveTypingBroadcastMutation").start(this.$UFI2LiveTypingBroadcastPublisher5,{actorID:this.$UFI2LiveTypingBroadcastPublisher1,feedbackID:this.$UFI2LiveTypingBroadcastPublisher2},c)};d.publishStopEvent=function(){var a=this;if(this.$UFI2LiveTypingBroadcastPublisher4)return;this.$UFI2LiveTypingBroadcastPublisher3&&(this.$UFI2LiveTypingBroadcastPublisher3.dispose(),this.$UFI2LiveTypingBroadcastPublisher3=null);var c=function(){a.$UFI2LiveTypingBroadcastPublisher4=null};this.$UFI2LiveTypingBroadcastPublisher4=b("UFI2LiveTypingBroadcastMutation").stop(this.$UFI2LiveTypingBroadcastPublisher5,{actorID:this.$UFI2LiveTypingBroadcastPublisher1,feedbackID:this.$UFI2LiveTypingBroadcastPublisher2},c)};return c}(b("AbstractCommentLiveTypingPublisher"));e.exports=a}),null);
__d("getUpgradedUFI2LiveTypingBroadcastComposerPlugin",["FBLogger","React","UFI2LiveTypingBroadcastPublisher","isUFI2ComposerStateEmpty"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,b){if(a.__type==="plain-text"&&b.__type==="plain-text")return a.text!==b.text;return a.__type==="editor-state-based"&&b.__type==="editor-state-based"?a.editorState.getCurrentContent().getBlockMap()!==b.editorState.getCurrentContent().getBlockMap():!1}function a(a){__p&&__p();var c;c=(c=a.feedback.viewer_current_actor)==null?void 0:c.id;var d=a.feedback.id;a=a.relayEnvironment;if(c==null||d==null){b("FBLogger")("ufi2").warn("Failed to fetch `feedback.viewer_current_actor.id` or `feedback.id` for use in the UFI live typing broadcast plugin. The live typing broadcast is disabled for this UFI.");return{componentWillUnmount:function(){},onBootload:function(a,b,c){},render:function(a,c,d){a.subscriptionsHandler;c=babelHelpers.objectWithoutPropertiesLoose(a,["subscriptionsHandler"]);return b("React").createElement(d,c)}}}var e=new(b("UFI2LiveTypingBroadcastPublisher"))(c,d,a);return{componentWillUnmount:function(){e!=null&&e.destroy()},onBootload:function(a,c,d){if(!d)return;c=a.inputProps.composerState;b("isUFI2ComposerStateEmpty")(c)||e.handleStartEvent()},render:function(a,c,d){__p&&__p();a.subscriptionsHandler;c=babelHelpers.objectWithoutPropertiesLoose(a,["subscriptionsHandler"]);return b("React").createElement(d,babelHelpers["extends"]({},c,{inputProps:babelHelpers["extends"]({},a.inputProps,{onBlur:function(b){a.inputProps.onBlur&&a.inputProps.onBlur(b);if(b.isDefaultPrevented())return;e.handleStopEvent()},onCommit:function(){var b;e.handleStopEvent();return(b=a.inputProps).onCommit.apply(b,arguments)},onComposerStateChange:function(b){return a.inputProps.onComposerStateChange(function(a){var c=babelHelpers["extends"]({},a,b(a));g(a.inputState,c.inputState)&&e.handleStartEvent();return c})}})}))}}}e.exports=a}),null);