if (self.CavalryLogger) { CavalryLogger.start_js(["ValE5"]); }

__d("MessengerBotsWebTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCount=function(a){this.$1.count=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setIndex=function(a){this.$1.index=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPayload=function(a){this.$1.payload=a;return this};c.setQrContentType=function(a){this.$1.qr_content_type=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTitle=function(a){this.$1.title=a;return this};c.setTitles=function(a){this.$1.titles=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setType=function(a){this.$1.type=a;return this};c.setURL=function(a){this.$1.url=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={count:!0,event:!0,index:!0,page_id:!0,payload:!0,qr_content_type:!0,time:!0,title:!0,titles:!0,type:!0,url:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerPlatformClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setAppversion=function(a){this.$1.appversion=a;return this};c.setClientUserID=function(a){this.$1.client_userid=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setCountry=function(a){this.$1.country=a;return this};c.setDeviceid=function(a){this.$1.deviceid=a;return this};c.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};c.setIsemployee=function(a){this.$1.isemployee=a;return this};c.setLoggingToken=function(a){this.$1.logging_token=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setRawclienttime=function(a){this.$1.rawclienttime=a;return this};c.setSessionid=function(a){this.$1.sessionid=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={appid:!0,appversion:!0,client_userid:!0,clienttime:!0,country:!0,deviceid:!0,extra_client_data:!0,isemployee:!0,logging_token:!0,name:!0,rawclienttime:!0,sessionid:!0,thread_id:!0,time:!0,weight:!0};e.exports=a}),null);
__d("ChatFlyoutPlaceholder.react",["React","XUISpinner.react"],(function(a,b,c,d,e,f){"use strict";var g={padding:"30px",textAlign:"center"};a=function(){return b("React").createElement("div",{style:g},b("React").createElement(b("XUISpinner.react"),{size:"large"}))};e.exports=a}),null);
__d("XShareScrapeAttachmentAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/message_share_attachment/fromURI/",{})}),null);
__d("MessengerURLUploader",["AsyncRequest","Event","MessengerActions","SubscriptionsHandler","URLMatcher","XShareScrapeAttachmentAsyncController","debounce"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("XShareScrapeAttachmentAsyncController").getURIBuilder().getURI(),h=920,i=920;a=function(){__p&&__p();function a(a,c,d){__p&&__p();var e=this;this.handleInputValueChange=function(a){a=e.$3();a=b("URLMatcher").match(a);a&&(e.$5!==a&&(e.$5=a,e.$2=null,b("MessengerActions").loadingPreview(e.$7,a),e.loadShare()))};this.$3=a;this.$6=new(b("SubscriptionsHandler"))();this.$7=d;this.$4=b("debounce")(this.handleInputValueChange,200);this.initInput(c)}var c=a.prototype;c.getData=function(){return this.$2};c.getMatchedURL=function(){return this.$5};c.initInput=function(a){this.$6.addSubscriptions(b("Event").listen(a,"keyup",this.$4),b("Event").listen(a,"paste",this.$4))};c.loadShare=function(){this.$1&&this.$1.abort&&this.$1.abort();var a=this.$5;a&&(this.$1=new(b("AsyncRequest"))().setMethod("POST").setURI(g).setData({uri:a,image_width:i,image_height:h,disallow_delayed:!0}).setHandler(this.handleShareLoad.bind(this,a)).send())};c.handleShareLoad=function(a,b){a===this.$5&&(this.$2=(b.payload||0).share_data)};c.setThreadID=function(a){this.$7=a};c.clearShareData=function(){this.$5=null,this.$2=null};return a}();e.exports=a}),null);
__d("DebouncedMentionsTextEditor.react",["AbstractMentionsTextEditor.react","clearImmediate","debounce","setImmediate"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.__maybeSearch=function(){var a=d.props.editorState,c=a.getSelection();if(c.getHasFocus()&&c.isCollapsed()){var e=a.getCurrentContent();a=d.props;var f=a.mentionsSource,g=a.assistantTypeaheadSource;(f||g)&&(d.$DebouncedMentionsTextEditor1&&b("clearImmediate")(d.$DebouncedMentionsTextEditor1),d.$DebouncedMentionsTextEditor1=b("setImmediate")(function(){f&&f.search(e,c,d.__onShowMentions),g&&g.search(e,c,d.__onShowMentions)}))}};d.__debouncedSearch=b("debounce")(d.__maybeSearch,50);return d}var d=c.prototype;d.componentDidUpdate=function(a){this.props.editorState!==a.editorState&&this.__debouncedSearch()};d.componentWillUnmount=function(){this.$DebouncedMentionsTextEditor1&&b("clearImmediate")(this.$DebouncedMentionsTextEditor1),a.prototype.componentWillUnmount.call(this)};return c}(b("AbstractMentionsTextEditor.react"));e.exports=a}),null);
__d("GraphQLMessengerPlatformCtaPostHandlingWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1570574486349284"};b.getQueryID=function(){return"389945858066688"};return b}(b("WebGraphQLMutationBase"))}),null);
__d("MNPlatformClickSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:"UNKNOWN",ATTACHMENT_ATTRIBUTION_ICON:"ATTACHMENT_ATTRIBUTION_ICON",GAMES_SCREENSHOT_ATTACHMENT:'GAMES_SCREENSHOT_ATTACHMENT"',GAMES_SEARCH:"GAMES_SEARCH",GAMES_SHARE_ATTACHMENT:"GAMES_SHARE_ATTACHMENT",GIF_ATTRIBUTION:"GIF_ATTRIBUTION",LANDING_PAGE_GETTING_STARTED:"LANDING_PAGE_GETTING_STARTED",M_SUGGESTION:"M_SUGGESTION",MORE_DRAWER_CHAT_EXTENSION:"MORE_DRAWER_CHAT_EXTENSION",MORE_DRAWER_CHAT_EXTENSION_SEEMORE:"MORE_DRAWER_CHAT_EXTENSION_SEEMORE",MORE_DRAWER_PAGES_CHAT_EXTENSION:"MORE_DRAWER_PAGES_CHAT_EXTENSION",MUSIC_ATTACHMENT:"MUSIC_ATTACHMENT",PLATFORM_GENERIC_ATTACHMENT:"PLATFORM_GENERIC_ATTACHMENT",PLATFORM_MEDIA_ATTACHMENT:"PLATFORM_MEDIA_ATTACHMENT",PLATFORM_MENU:"PLATFORM_MENU",QUICK_REPLY:"QUICK_REPLY",THREAD_SETTING:"THREAD_SETTING",THREAD_VIEW_MESSAGE:"THREAD_VIEW_MESSAGE",UNSUPPORTED_OR_NOT_RECOGNIZED:"UNSUPPORTED_OR_NOT_RECOGNIZED"})}),null);
__d("XMNCommerceCTAPostProcessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/cta/postprocess/",{cta_id:{type:"String",required:!0},message_id:{type:"String"}})}),null);
__d("MNCommerceCTAProcessor",["AsyncRequest","CurrentUser","GraphQLMessengerPlatformCtaPostHandlingWebGraphQLMutation","MessengerPlatformClientTypedLogger","MNPlatformClickSource","PopupWindow","XMNCommerceCTAPostProcessController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.process=function(a,c){c===void 0&&(c=null);var d=b("PopupWindow").open("",500,1024);a=b("XMNCommerceCTAPostProcessController").getURIBuilder().setString("cta_id",a).setString("message_id",c).getURI();new(b("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(function(a){return d.location=a.payload}).send()};c.postHandle=function(a,c){a=b("GraphQLMessengerPlatformCtaPostHandlingWebGraphQLMutation").getURI({cta_id:a,message_id:c});new(b("AsyncRequest"))().setURI(a).send()};c.logCTAClick=function(a){var c,d;d=(d=a)!=null?d.logging_token:d;var e=d?JSON.parse(d).click_source:b("MNPlatformClickSource").UNKNOWN;e={action_id:(c=a)!=null?c.id:c,action_title:((c=a)!=null?c.action_title:c)||((c=a)!=null?c.title:c)||((c=a)!=null?c.translated_title:c),action_type:(c=a)!=null?c.action_type:c,action_url:((c=a)!=null?c.action_url:c)||((c=a)!=null?c.action_link:c),click_source:e,page_id:(c=a)!=null?c.page_id:c};new(b("MessengerPlatformClientTypedLogger"))().setClientUserID(b("CurrentUser").getID()).setName("did_tap_call_to_action").setExtraClientData(JSON.stringify(e)).setLoggingToken(d).log()};return a}();e.exports=new a()}),null);
__d("XMNCommercePostbackCTAController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/postback/",{cta_id:{type:"String",required:!0},message_id:{type:"String"},ref:{type:"String"},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackCTADataManager",["AsyncRequest","BanzaiODS","CurrentUser","getPageIDFromThreadID","MercuryMessageActions","MercuryMessageObject","MercurySourceType","MNPlatformTagsDataManager","XMNCommercePostbackCTAController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryMessageActions").get();a=function(){__p&&__p();function a(){}var c=a.prototype;c.send=function(a,c,d,e){c===void 0&&(c=null);d===void 0&&(d=null);e===void 0&&(e=null);a=b("XMNCommercePostbackCTAController").getURIBuilder().setString("cta_id",a).setString("ref",d).setString("message_id",e).getURI();!c?new(b("AsyncRequest"))().setURI(a).setMethod("POST").send():new(b("AsyncRequest"))().setURI(a).setMethod("POST").setErrorHandler(c).send()};c.sendAndConfirm=function(a,b,c,d,e,f,g,h){e===void 0&&(e=null),f===void 0&&(f=null),g===void 0&&(g=[]),h===void 0&&(h=null),b!==null&&this.sendConfirmationText(b,c,d,g),this.send(a,e,f,h)};c.sendConfirmationText=function(a,c,d,e){e===void 0&&(e=[]);if(!c)b("BanzaiODS").bumpEntityKey("messenger_commerce","confirm_message_failed.empty_threadID");else{var f=new(b("MercuryMessageObject"))(b("CurrentUser").getID()),h=b("getPageIDFromThreadID")(c);b("MNPlatformTagsDataManager").hasThreadTags(h)&&e.concat(b("MNPlatformTagsDataManager").getThreadTags());g.send(f.constructCTAConfirmationMessageObject(a,b("MercurySourceType").TITAN_WEB,c,d,e));e&&e.length>0&&b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread()}};return a}();e.exports=new a()}),null);
__d("MessengerMDotMeReferralStore",["MessengerActions","MessengerStore"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.$MessengerMDotMeReferralStore1={refCode:null,refThreadID:null};return b}var d=c.prototype;d.getState=function(){return this.$MessengerMDotMeReferralStore1};d.__onDispatch=function(a){switch(a.type){case b("MessengerActions").Types.UPDATE_MDOT_ME:this.$MessengerMDotMeReferralStore1.refCode=a.refCode,this.$MessengerMDotMeReferralStore1.refThreadID=a.refThreadID,this.emitChange()}};return c}(b("MessengerStore"));e.exports=new a()}),null);
__d("XMNCommercePostbackRefSendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/postback_ref/",{page_id:{type:"String",required:!0},ref:{type:"String",required:!0},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d("MNCommercePostbackRefSendManager",["AsyncRequest","MessengerActions","MessengerMDotMeReferralStore","XMNCommercePostbackRefSendController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.sendMDotMeRef=function(a,c){var d=this.getMdotMeRef();if(this.shouldSendRef(c,a)){c=b("XMNCommercePostbackRefSendController").getURIBuilder().setString("page_id",a).setString("ref",d).getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").send();b("MessengerActions").changeMDotMeReferral()}};c.shouldSendRef=function(a,b){return!b||!a?!1:this.hasMDotMeRef(b)};c.hasMDotMeRef=function(a){var c=b("MessengerMDotMeReferralStore").getState();return!!(c.refCode&&a&&c.refThreadID&&c.refThreadID===a)};c.getMdotMeRef=function(){var a=b("MessengerMDotMeReferralStore").getState();return a.refCode};return a}();e.exports=new a()}),null);
__d("MercuryReadOnlyReason",["fbt","Link.react","MercuryConfig","React","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getReason:function(a){__p&&__p();a===void 0&&(a=!1);if(a){a=b("MercuryConfig").DYIDeepLink;return g._("Sorry, this conversation isn't active any more because messages can no longer be sent to email addresses. After 1 May 2016, conversations with email addresses will only be available in a copy of your Facebook data. {download your information}",[g._param("download your information",b("React").createElement("a",{href:a},g._("Learn more")))])}else if(b("MercuryConfig").ViewerIsReadOnly)return g._("You've been temporarily blocked from sending messages. {learn more about blocks}",[g._param("learn more about blocks",b("React").createElement(b("Link.react"),{href:new(b("URI"))("https://www.facebook.com/help/181183045316843"),target:"_blank"},"Learn more"))]);else if(b("MercuryConfig").ColdOpenBlock)return g._("You're temporarily blocked from starting new conversations. {learn more about blocks}",[g._param("learn more about blocks",b("React").createElement(b("Link.react"),{href:new(b("URI"))("https://www.facebook.com/help/181183045316843"),target:"_blank"},"Learn more"))]);else return g._("You cannot reply to this conversation.")}};e.exports=a}),null);
__d("MNBotsLoggerEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BOT_COMPOSER_MENU_ICON_DISPLAYED:"bot_composer_menu_icon_displayed",BOT_COMPOSER_MENU_ICON_TAPPED:"bot_composer_menu_icon_tapped",BOT_COMPOSER_MENU_ITEM_DID_SELECT:"bot_composer_menu_item_did_select",BOT_COMPOSER_QUICK_REPLY_DISPLAYED:"bot_composer_quick_reply_displayed",BOT_COMPOSER_QUICK_REPLY_TAPPED:"bot_composer_quick_reply_tapped"})}),null);
__d("MessengerBotMenuButton.react",["AutoFocusableLink.react","BootloadOnRender.react","ChatFlyoutPlaceholder.react","JSResource","LazyComponent.react","MessengerBotMenuDataFetcher","MessengerBotsWebTypedLogger","MessengerContextualDialog.react","MessengerEnvironment","MNBotsLoggerEvents","React","XUIContextualDialog.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;var g=302,h=280;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=!1,c.state={flyoutOpen:!!c.props.clicked,isLoading:!1,menuItems:null},c.$3=function(){c.setState({flyoutOpen:!1})},c.$7=function(){c.state.flyoutOpen&&c.$3()},c.$5=function(){c.$1=c.state.flyoutOpen},c.$4=function(a){a.stopPropagation();if(c.state.flyoutOpen||c.$1)return;c.state.menuItems===null&&(c.setState({isLoading:!0}),c.$2());c.setState({flyoutOpen:!c.state.flyoutOpen})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.state.flyoutOpen&&this.state.menuItems===null&&(this.setState({isLoading:!0}),this.$2())};d.componentDidMount=function(){new(b("MessengerBotsWebTypedLogger"))().setEvent(b("MNBotsLoggerEvents").BOT_COMPOSER_MENU_ICON_DISPLAYED).setPageID(this.props.pageID).log()};d.componentWillUnmount=function(){this.state.flyoutOpen&&this.$3()};d.render=function(){return b("React").createElement("span",null,b("React").createElement(b("AutoFocusableLink.react"),{autoFocus:this.props.autoFocus,className:this.props.className,href:"#",onClick:this.$4,onMouseDown:this.$5,role:"button",ref:"link"}),this.$6())};d.$6=function(){var a=this;if(!this.state.flyoutOpen)return null;var c=b("MessengerEnvironment").messengerui,d=c?g:h;c=c?b("MessengerContextualDialog.react"):b("XUIContextualDialog.react");return b("React").createElement(c,babelHelpers["extends"]({alignment:this.props.flyoutAlignment,width:d,position:"above",contextRef:function(){return a.refs.link},onBeforeHide:this.$7,onBlur:this.$3,shown:this.state.flyoutOpen},this.props,{key:"contextualDialog"}),b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{onEscKeyDown:this.$3,shown:this.state.flyoutOpen,isLoading:this.state.isLoading,menuItems:this.state.menuItems,pageID:this.props.pageID,threadID:this.props.threadID,onClick:this.$3}),loader:b("JSResource")("MessengerBotMenuDialog.react").__setRef("MessengerBotMenuButton.react"),placeholder:b("React").createElement(b("ChatFlyoutPlaceholder.react"),null)}))};d.$2=function(){var a=this;b("MessengerBotMenuDataFetcher").getMenuItems(this.props.pageID,function(b){a.setState({menuItems:b,isLoading:!1})},function(){a.setState({menuItems:[],isLoading:!1})})};return c}(b("React").Component);c.propTypes={autoFocus:a.bool,className:a.string,clicked:a.bool,flyoutAlignment:a.string.isRequired,threadID:a.string.isRequired,pageID:a.string.isRequired};e.exports=c}),null);
__d("MessengerSingleSectionContactList.react",["cx","MessengerContactAdapters","MessengerContactList.react","MessengerTypeaheadUtils","React","TypeaheadViewPropTypes","joinClasses","wrapNullableForReact"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.entries;a=a.viewProps;var d=(c.length?"":"_599s")+" _29hl _8i1 _11_d _4p-s";return b("React").createElement(b("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:b("joinClasses")(this.props.className,d,a.className),contactAdapter:b("MessengerContactAdapters").fromSearchableEntry,hasHoverState:!0,highlightedEntry:b("wrapNullableForReact")(this.props.highlightedEntry),isLoading:!1,listSections:b("MessengerTypeaheadUtils").buildSingleSection(c),onRenderHighlight:this.props.onRenderHighlight,onHighlight:this.props.onHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,viewer:a.viewer})};return c}(b("React").PureComponent);a.propTypes=b("TypeaheadViewPropTypes");a.defaultProps={role:"listbox"};e.exports=a}),null);
__d("AtSignAllowEmptyMentionsStrategy",["DocumentMentionsRegex"],(function(a,b,c,d,e,f){__p&&__p();a=b("DocumentMentionsRegex").PUNCTUATION;c=["@","\\uff20"].join("");d="[^"+c+a+"\\s]";f="(?:\\.[ |$]| |["+a+"]|)";var g=new RegExp("(?:^|\\s|[(\\/])(["+c+"]((?:"+d+f+"){0,20}))$");b={name:"AtSignAllowEmptyMentionsStrategy",findMentionableString:function(a){a=g.exec(a);if(a!==null){var b=a[2];return{matchingString:b,leadOffset:a[1].length}}return null}};e.exports=b}),null);
__d("FourLetterMentionsStrategy",["DocumentMentionsRegex"],(function(a,b,c,d,e,f){"use strict";a=3;c="\\b[a-z][^\\s"+b("DocumentMentionsRegex").PUNCTUATION+"]";var g=new RegExp("(^|[^#])((?:"+c+"{"+a+",})$)");d={name:"FourLetterMentionsStrategy",findMentionableString:function(a){a=g.exec(a);return a!==null?{matchingString:a[2],leadOffset:a[2].length}:null}};e.exports=d}),null);
__d("createMentionsSearchSourceFromParticipants",["fbt","ix","AtSignAllowEmptyMentionsStrategy","CapitalizedNameMentionsStrategy","DocumentCompositeMentionsSource","DocumentMentionsSource","FilteredSearchSource","FourLetterMentionsStrategy","LogHistory","SearchableEntry","StaticSearchSource","filterCapitalizedNames","gkx","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("LogHistory").getInstance("messenger_mentions"),j=h("91674").uri,k=171602870233241;function a(a,c,d,e,f){__p&&__p();if(!a||!c)return null;var g=null,h=[];c.length<=2?f&&(g=[o()]):(g=c.reduce(function(c,e){if(!e||e.fbid===a)return c;var f=d&&d.custom_nickname&&d.custom_nickname[e.fbid]?d.custom_nickname[e.fbid]:"";c.push(new(b("SearchableEntry"))({uniqueID:e.fbid,type:"user",title:"@"+e.name,subtitle:f,photo:e.image_src,keywordString:f,auxiliaryData:{workForeignEntityInfo:e.work_foreign_entity_info}}));return c},[]),h=[].concat(g),f&&g.push(o()),e&&d&&d.thread_fbid&&(g.push(m(d.thread_fbid)),g.push(n(d.thread_fbid))));if(g===null)return null;f=new(b("StaticSearchSource"))(g);e=new(b("StaticSearchSource"))(h);b("gkx")("846032")&&(e=new(b("FilteredSearchSource"))(l("@"),e));i.debug("constructed_search_source",JSON.stringify({participants:c.map(function(a){return a&&a.fbid})}));return new(b("DocumentCompositeMentionsSource"))([new(b("DocumentMentionsSource"))(b("AtSignAllowEmptyMentionsStrategy"),f),new(b("DocumentMentionsSource"))(b("CapitalizedNameMentionsStrategy"),e),new(b("DocumentMentionsSource"))(b("FourLetterMentionsStrategy"),e)])}function l(a){return function(c,d){return b("filterCapitalizedNames")(c,d,a)}}function m(a){var c=g._("everyone").toString(),d=g._("Mention everyone in this chat").toString();return new(b("SearchableEntry"))({photo:j,title:"@"+c,uniqueID:b("nullthrows")(a),subtitle:d})}function n(a){var c=g._("here").toString(),d=g._("Mention everyone in this chat who is active").toString();return new(b("SearchableEntry"))({photo:j,title:"@"+c,uniqueID:b("nullthrows")(a)+"-active",subtitle:d})}function o(){var a=g._("M").toString(),c=g._("Messenger Assistant").toString();return new(b("SearchableEntry"))({photo:h("581082").uri,title:"@"+a,uniqueID:k,subtitle:c})}e.exports=a}),null);
__d("createMessengerMentionTypeaheadDraftEntity",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.createEntity("ASSISTANT_TYPEAHEAD","SEGMENTED",{mid:b.getUniqueID()})}e.exports=a}),null);
__d("MessengerComposerInput.react",["cx","fbt","Bootloader","CompositeDraftDecorator","DebouncedMentionsTextEditor.react","DOMDimensions","DraftModifier","EditorState","EmojiFormat.bs","Event","LogHistory","MentionsLayer.react","MercuryIDs","MercuryThreadIDMap","MercuryThreadSnippet.react","MercuryThreadTitleSafe.react","MercuryTimestamp","MercuryTriodeSourceUtil","MessengerActions","MessengerBotMenuButton.react","MessengerConstants","MessengerDomIDs.bs","MessengerDotComAndInboxM4Check.bs","MessengerEditorStateManager","MessengerEmojiSpan.react","MessengerEmoticonSpan.react","MessengerMentionsEntityDecorator.react","MessengerMentionSource","MessengerSingleSectionContactList.react","MessengerTabIndices","MessengerUploadFilesUtil.bs","MessengerURLUploader","React","ReactDOM","Run","TypingDetectorController","WorkGalahadSettings","clearImmediate","createMentionsSearchSourceFromParticipants","createMessengerMentionDraftEntity","createMessengerMentionTypeaheadDraftEntity","debounce","getEntityMatcher","getProfileRangesForContentState","getThreadTypeNameFromThreadType","getVisibleValueForContentStateWithMessengerEmoji","gkx","handleBeforeInputForMessengerEmoji","handleBeforeInputForMessengerEmoticon","handleSoftNewlineForMessengerEmoticon","immutable","insertEmoticonIntoEditorState","insertMessengerEmojiIntoContentState","isSoftNewlineEvent","replaceMentionedTextInEditorState","setImmediate","shouldNotRenderSegoe","throttle"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDomIDs.bs").ids;a=b("React").PropTypes;var j=1,k=/^image\//,l="handled",m=8,n="not-handled",o=b("LogHistory").getInstance("MessengerComposerInput"),p={};p[b("MessengerConstants").NEW_THREAD_KEY]={version:0,editorState:b("EditorState").createEmpty()};function q(a,c){var d=c.editorState,e=c.version;if(!a||a&&e<p[a].version)return;p[a]=c;a!==b("MessengerConstants").NEW_THREAD_KEY&&b("MessengerEditorStateManager").set(a,d)}function r(a){p[a]||(p[a]={version:0,editorState:b("EditorState").createEmpty()});return p[a]}function s(a,b){if(!a)return null;var c=r(a);c.editorState=b;p[a]=c;return c}function t(a,b){if(a){var c=r(a);c.version+=1;c.editorState=b;q(a,c)}}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$10=!1;d.$19=function(a){if(d.$10&&a!==d.state.editorState){d.setState({editorState:a});a=s(d.props.threadID,a);a&&d.$5(d.props.threadID,a);d.props.onResize&&d.props.onResize()}};d.$20=function(a,c){if(b("isSoftNewlineEvent")(a)){a=b("handleSoftNewlineForMessengerEmoticon");a=a(c);d.setState({editorState:a});s(d.props.threadID,a);return l}d.setState({},d.triggerSend);return l};d.getValue=function(){return b("getVisibleValueForContentStateWithMessengerEmoji")(d.state.editorState.getCurrentContent())};d.focus=function(){d.refs.input&&d.refs.input.focus()};d.$28=function(a,b){d.props.onBeforeInput&&d.props.onBeforeInput(a,b);var c=d.$32(a,b);a=d.$33(a,b);return c||a?l:n};d.$12=function(a){a=d.props.handleOnlyImageUploads?a.filter(function(a){return a&&k.test(a.type)}):a;var c=d.$23();if(a.length){b("MessengerActions").prepareFilesForSend(c,a,"Copy");return l}return n};d.$17=function(){var a=d.props.threadID;if(!a)return;q(a,r(a))};d.$18=function(){d.setState(d.$13(!0))};d.triggerSend=function(){d.$21()&&d.$24();if(d.getValue().trim().length>0||d.$34())if(d.props.thread){var a=d.getMentions(d.props.thread.thread_fbid);d.$25(a)}else d.$25()};d.$29=function(){var a=(d.state.addedMentionsCount||0)+1;d.setState({addedMentionsCount:a})};d.$30=function(a,c){a=(d.state.mentionsTriggeredCount||0)+1;a={mentionsTriggeredCount:a};d.state.mentionsTriggerSource||(a.mentionsTriggerSource=c===j?b("MessengerMentionSource").ATSIGN:b("MessengerMentionSource").TYPEAHEAD);d.setState(a)};d.$12=d.$12.bind(babelHelpers.assertThisInitialized(d));d.$11=c;d.state=d.$13();d.$6=b("debounce")(function(a){d.$11||(d.$11=a),u(d.props,d.$11)&&d.$14(),d.$11=a},300);d.$7=b("throttle")(function(){if(d.$10){var a=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d))).height;d.$1!==a&&(d.props.onResize&&d.props.onResize());d.$1=a}},100);return d}var d=c.prototype;d.$13=function(a){var c;this.props.threadID===b("MessengerConstants").NEW_THREAD_KEY?c=r(b("MessengerConstants").NEW_THREAD_KEY).editorState:c=b("MessengerEditorStateManager").get(this.props.threadID);c=this.$15(c,a);return{editorState:c}};d.componentDidMount=function(){this.$10=!0,this.$1=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(this)).height,this.$16(),this.$2=new(b("MessengerURLUploader"))(this.getValue,b("ReactDOM").findDOMNode(this.refs.input),this.props.threadID),b("Run").onUnload(this.$17),this.$3=b("Event").listen(window,"blur",this.$17),this.$4=b("Event").listen(window,"focus",this.$18),this.$5=b("debounce")(function(a,b){q(a,b)},1e3)};d.componentDidUpdate=function(a,c){this.$9=b("setImmediate")(this.$7),this.props.threadID!==a.threadID?this.$16():this.$6(a),c.editorState!==this.state.editorState&&(this.props.onChange&&this.props.onChange(this.getValue()))};d.componentWillUnmount=function(){var a=this.props.threadID;a&&q(a,r(a));this.$10=!1;this.$8&&this.$8.destroy();this.$9&&b("clearImmediate")(this.$9);this.$3&&this.$3.remove();this.$4&&this.$4.remove()};d.insertEmoticon=function(a){a=b("insertEmoticonIntoEditorState")(a,this.state.editorState);a!==this.state.editorState&&this.$19(a)};d.insertEmoji=function(a){var c=this.state.editorState;a=b("insertMessengerEmojiIntoContentState")(b("EmojiFormat.bs").codeArrayToCodeString(a),c.getCurrentContent(),c.getSelection(),c.getCurrentInlineStyle());c=b("EditorState").push(c,a,"insert-characters");c!==this.state.editorState&&this.$19(b("EditorState").forceSelection(c,a.getSelectionAfter()))};d.$21=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadedFiles").size>0)};d.$16=function(){if(!this.$10)return;this.setState(this.$13(!1));this.$22();this.$2&&(this.$2.setThreadID(this.props.threadID),this.$2.clearShareData());this.$14()};d.$14=function(){__p&&__p();var a=this;if(b("gkx")("678611")){var c=this.props,d=c.participants,e=c.viewer;b("Bootloader").loadModules(["createAssistantTypeaheadSearchSource"],function(b){a.setState({assistantTypeaheadSource:b(e,d&&d.toArray(),a.props.thread,a.props.pageID)})},"MessengerComposerInput.react")}if(this.props.mentionsEnabled){c=this.props;var f=c.participants,g=c.viewer;c=c.thread;this.setState({mentionsSource:b("createMentionsSearchSourceFromParticipants")(g,f&&f.toArray(),c,b("gkx")("678578"),b("gkx")("678579"))})}};d.$22=function(){this.$8&&this.$8.destroy();this.$8=null;var a=this.props.viewer;if(!a)return;var c=b("ReactDOM").findDOMNode(this.refs.input);this.props.threadID!==b("MessengerConstants").NEW_THREAD_KEY&&c&&(this.$8=new(b("TypingDetectorController"))(this.props.thread,b("MercuryIDs").getUserIDFromThreadID(this.props.threadID),c,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),null,b("MercuryThreadIDMap").getForFBID(a).getServerIDFromClientIDNow(this.props.threadID),this.getValue))};d.$23=function(){var a=this.props,c=a.threadID;a=a.thread;if(!b("MercuryIDs").isValidThreadID(c)){if(a)return a.thread_id;o.debug("Invalid threadID ",c)}return c};d.$24=function(){var a=this.props.fileUploader,c=this.$23();a&&(o.debug("Before send files to thread ",c),b("MessengerUploadFilesUtil.bs").sendAttchments(a,this.props.onFileUpload),o.debug("Before clean files for thread ",c),b("MessengerActions").cleanFiles(c))};d.$25=function(a){__p&&__p();var c=this;if(this.props.onMessageSend&&this.props.onMessageSend(this.getValue(),{shareable_attachment:this.getShareData(),profile_ranges:a},function(d){b("MessengerActions").removeSharePreview(c.props.threadID);if(d&&c.props.mentionsEnabled&&(a&&a.length||c.state.addedMentionsCount||c.state.mentionsTriggeredCount||c.state.mentionsTriggerSource)){var e=c.state,f=e.addedMentionsCount,g=e.mentionsTriggeredCount,h=e.mentionsTriggerSource;e=c.props;var i=e.thread,j=e.participants,k=d;b("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(c,d){new c().setEvent(d.MENTION).setGroupSize(j&&j.size).setNumDelivered(a&&a.length||0).setNumSelects(f).setNumTriggers(g).setThreadid(i&&i.thread_id).setThreadType(b("getThreadTypeNameFromThreadType")(i&&i.thread_type)).setOfflineThreadid(k.offline_threading_id).updateExtraData({source:h}).log()},"MessengerComposerInput.react")}})){var d=this.$15(b("EditorState").createEmpty());this.$2&&this.$2.clearShareData();this.setState({editorState:d,addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null});t(this.props.threadID,d);this.$8&&this.$8.resetState()}};d.getMentions=function(a){return b("getProfileRangesForContentState")(this.state.editorState.getCurrentContent(),a)};d.getInput=function(){return this.refs.input};d.render=function(){__p&&__p();var a=this.props,c=a.participants,d=a.thread;a=a.viewer;var e=null;c&&d&&a?e=h._("Conversation with {participantListAsShownInThreadList}. Updated {lastUpdatedTime} by {recentUpdateStringAsShownInThreadList}",[h._param("participantListAsShownInThreadList",this.$26(d,a)),h._param("lastUpdatedTime",b("MercuryTimestamp").getAbsoluteTimestamp(d.timestamp)),h._param("recentUpdateStringAsShownInThreadList",this.$27(c,d,a))]):e=h._("Composing a new message");c=null;this.props.threadID&&this.props.pageID&&(c=b("React").createElement("div",{ref:"botsMenuContainer",className:"_3km1"},b("React").createElement(b("MessengerBotMenuButton.react"),{flyoutAlignment:"left",threadID:this.props.threadID,pageID:this.props.pageID,className:"_3km2"})));d="";this.props.disableInput?d=h._("Composer is disabled for this thread.").toString():this.props.thread&&!this.props.thread.is_canonical?d=h._("Type a message, \u0040name...").toString():d=h._("Type a message...").toString();a=b("gkx")("678612");return b("React").createElement("div",{className:"_kmc"+(b("gkx")("834752")&&b("MessengerDotComAndInboxM4Check.bs").yes?" _7kpg":"")+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyx":"")+(this.props.smallerEqual640?" _2swd":"")+(b("shouldNotRenderSegoe")(this.state.editorState.getCurrentContent().getPlainText())?" _2por":"")+" navigationFocus",onClick:this.focus,role:"presentation"},this.props.showMenu?c:null,b("React").createElement("div",{className:(b("gkx")("834752")&&b("MessengerDotComAndInboxM4Check.bs").yes?"":"_3-8x")+(this.props.showMenu?" _3km3":"")+(a?"":" _3oh-")},b("React").createElement(b("DebouncedMentionsTextEditor.react"),{autoHighlight:!0,ariaControls:i.CONVERSATION,ariaDescribedBy:i.COMPOSER_INPUT_DESCRIPTION,ariaLabel:d,editorState:this.state.editorState,handleBeforeInput:this.$28,handleContentReturn:this.$20,handlePastedFiles:this.$12,handleReturn:this.$20,maxResults:m,readOnly:this.props.disableInput,mentionCreationForContentStateFn:b("createMessengerMentionDraftEntity"),mentionTypeaheadCreationForContentStateFn:b("createMessengerMentionTypeaheadDraftEntity"),mentionResultsComponent:b("MentionsLayer.react"),mentionResultsProps:{typeaheadView:b("MessengerSingleSectionContactList.react"),typeaheadViewProps:{className:"_13iv",viewer:this.props.viewer},position:"above",autoflip:!0},mentionsSource:this.state.mentionsSource,assistantTypeaheadSource:this.state.assistantTypeaheadSource,onChange:this.$19,placeholder:d,ref:"input",spellCheck:!0,stripPastedStyles:!0,tabIndex:this.props.threadID===b("MessengerConstants").NEW_THREAD_KEY?b("MessengerTabIndices").COMPOSER_INPUT:0,textAlignment:"left",onAddMention:this.$29,onShowMentions:this.$30}),b("React").createElement("div",{className:"_5ca7",id:i.COMPOSER_INPUT_DESCRIPTION},e)))};d.$26=function(a,c){return b("React").createElement(b("MercuryThreadTitleSafe.react"),{thread:a,viewer:c})};d.$27=function(a,c,d){return b("React").createElement(b("MercuryThreadSnippet.react"),{participants:a,shouldAlwaysRenderSender:!0,shouldRenderYou:!0,thread:c,viewer:d})};d.$15=function(a,c){var d=this.$31(a);a=b("EditorState").set(a,{decorator:d});return c||this.props.disableAutofocus?a:b("EditorState").moveFocusToEnd(a)};d.$31=function(a){var c=b("MessengerEmoticonSpan.react");a=a.getCurrentContent();c=[{strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOTICON"},a.getEntity),component:c}];c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOJI"},a.getEntity),component:b("MessengerEmojiSpan.react")});c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="MENTION"},a.getEntity),component:b("MessengerMentionsEntityDecorator.react")});return new(b("CompositeDraftDecorator"))(c)};d.$32=function(a,c){a=b("handleBeforeInputForMessengerEmoticon")(c,a);if(a===c)return!1;this.setState({editorState:a});s(this.props.threadID,a);return!0};d.$33=function(a,c){a=b("handleBeforeInputForMessengerEmoji")(c,a);if(a===c)return!1;this.setState({editorState:a});s(this.props.threadID,a);return!0};d.handleTextDropped=function(a){var c=this.state.editorState,d=c.getSelection();if(d.get("hasFocus"))return;d=b("DraftModifier").replaceText(c.getCurrentContent(),d,a,c.getCurrentInlineStyle());a=b("EditorState").push(c,d,"insert-fragment");this.$19(a)};d.getShareData=function(){var a=this.props.sharePreview;return a&&a.type&&a.params?{share_type:a.type,share_params:a.params.get("data")}:null};d.exitCurrentMode=function(){this.refs.input&&this.refs.input.exitCurrentMode()};d.$34=function(){var a=this.props.sharePreview;return!!(a&&a.params&&a.type)};d.addMention=function(a){a=b("replaceMentionedTextInEditorState")(a,this.state.editorState,0,b("createMessengerMentionDraftEntity"));this.state.mentionsTriggerSource||this.setState({mentionsTriggerSource:b("MessengerMentionSource").REPLY});this.$19(a);this.$29()};return c}(b("React").PureComponent);c.propTypes={disableAutofocus:a.bool,fileUploader:a.object,handleOnlyImageUploads:a.bool.isRequired,isComposing:a.bool,mentionsEnabled:a.bool,pageID:a.string,participants:a.instanceOf(b("immutable").Map),sharePreview:a.object,showMenu:a.bool,disableInput:a.bool,smallerEqual640:a.bool,thread:a.object,threadID:a.string,viewer:a.string,onBeforeInput:a.func,onChange:a.func,onFileUpload:a.func,onResize:a.func,onMessageSend:a.func};function u(a,b){a=a.participants;b=b.participants;if(!a||!b)return!0;if(a===b)return!1;a=a.filter(Boolean);b=b.filter(Boolean);return a.size!==b.size||!a.equals(b)}e.exports=c}),null);
__d("MessengerConfirmBlockThreadDialogReact.bs",["fbt","bs_curry","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerConfirmBlockThreadDialogReact");function i(a,c){var d=function(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(void 0,0)},e=function(){return d(!1)};return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,d,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,g._("You have blocked {sender name}",[g._param("sender name",a)]))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[g._("You can access people you've blocked by going to the 'Filtered messages' list.")])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,g._("OK"),void 0,void 0,e,1,void 0,void 0,void 0,[]))]))]))},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.participantName,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerFileSizeErrorDialogReact.bs",["fbt","bs_curry","ReasonReact.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){switch(a){case"size-exceeded":return 1;case"wrong-type":return 0;default:return 2}}var i=b("ReasonReact.bs").statelessComponent("MessengerFileSizeErrorDialogReact");function j(a){switch(a){case 0:return g._("The type of file you're trying to attach isn't allowed. Please try again with a different format.");case 1:return g._("The file you have selected is too large. The maximum size is 25 MB.");case 2:return null}}function k(a,c){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,g._("Failed to upload files"))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[j(a)])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](0,g._("OK"),void 0,void 0,void 0,0,void 0,void 0,void 0,[]))]))]))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return k(h(a.error),[])});f.errorOfString=h;f.component=i;f.renderDialogBody=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerSendIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("React").createElement("svg",{height:"36px",width:"36px",viewBox:"0 0 36 36"},b("React").createElement("g",{fill:"none",fillRule:"evenodd"},b("React").createElement("g",void 0,b("React").createElement("polygon",{points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{d:"M31.1059281,19.4468693 L10.3449666,29.8224462 C8.94594087,30.5217547 7.49043432,29.0215929 8.17420251,27.6529892 C8.17420251,27.6529892 10.7473302,22.456697 11.4550902,21.0955966 C12.1628503,19.7344961 12.9730756,19.4988922 20.4970248,18.5264632 C20.7754304,18.4904474 21.0033531,18.2803547 21.0033531,17.9997309 C21.0033531,17.7196073 20.7754304,17.5095146 20.4970248,17.4734988 C12.9730756,16.5010698 12.1628503,16.2654659 11.4550902,14.9043654 C10.7473302,13.5437652 8.17420251,8.34697281 8.17420251,8.34697281 C7.49043432,6.9788693 8.94594087,5.47820732 10.3449666,6.1775158 L31.1059281,16.553593 C32.298024,17.1488555 32.298024,18.8511065 31.1059281,19.4468693",fill:a}))))}f.make=a}),null);
__d("bs_marshal",["bs_caml_string","bs_caml_missing_polyfill","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){if(c<0||d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.to_buffer: substring out of bounds"];else return b("bs_caml_missing_polyfill").not_implemented("caml_output_value_to_buffer")}function g(a,c){if(c<0||c>(a.length-20|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.data_size"];else return b("bs_caml_missing_polyfill").not_implemented("caml_marshal_data_size")}function c(a,b){return 20+g(a,b)|0}function h(a,c){if(c<0||c>(a.length-20|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];else{var d=b("bs_caml_missing_polyfill").not_implemented("caml_marshal_data_size");if(c>(a.length-(20+d|0)|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];else return b("bs_caml_missing_polyfill").not_implemented("caml_input_value_from_string")}}function d(a,c){return h(b("bs_caml_string").bytes_of_string(a),c)}function e(a,c,d){return b("bs_caml_missing_polyfill").not_implemented("caml_output_value")}function i(){return b("bs_caml_missing_polyfill").not_implemented("caml_input_value")}var j=20;f.to_channel=e;f.to_buffer=a;f.from_channel=i;f.from_bytes=h;f.from_string=d;f.header_size=j;f.data_size=g;f.total_size=c}),null);
__d("bs_obj",["bs_marshal","bs_caml_array","bs_caml_missing_polyfill","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("bs_caml_array").caml_array_get,h=b("bs_caml_array").caml_array_set;function a(){return b("bs_caml_missing_polyfill").not_implemented("caml_output_value_to_string")}function c(a,c){return[b("bs_marshal").from_bytes(a,c),c+b("bs_marshal").total_size(a,c)|0]}function i(a){a=a.length!==void 0&&(a.tag|0)!==248&&a.length>=1?a[0]:a;var c;if(a.length!==void 0&&a.tag===248)c=a[0];else throw b("bs_caml_builtin_exceptions").not_found;if(c.tag===252)return a;else throw b("bs_caml_builtin_exceptions").not_found}function d(a){try{a=i(a);return a[0]}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_name"];else throw a}}function e(a){try{a=i(a);return a[1]}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_id"];else throw a}}function j(a){try{return i(a)}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_slot"];else throw a}}var k=0,l=245,m=246,n=247,o=248,p=249,q=250,r=251,s=251,t=252,u=253,v=254,w=255,x=255,y=1e3,z=1001,A=1002;f.double_field=g;f.set_double_field=h;f.first_non_constant_constructor_tag=k;f.last_non_constant_constructor_tag=l;f.lazy_tag=m;f.closure_tag=n;f.object_tag=o;f.infix_tag=p;f.forward_tag=q;f.no_scan_tag=r;f.abstract_tag=s;f.string_tag=t;f.double_tag=u;f.double_array_tag=v;f.custom_tag=w;f.final_tag=x;f.int_tag=y;f.out_of_heap_tag=z;f.unaligned_tag=A;f.extension_name=d;f.extension_id=e;f.extension_slot=j;f.marshal=a;f.unmarshal=c}),null);
__d("bs_camlinternalLazy",["bs_obj","bs_curry","bs_caml_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("bs_caml_exceptions").create("CamlinternalLazy.Undefined");function h(){throw g}function i(a){__p&&__p();var c=a[0];a[0]=h;try{c=b("bs_curry")._1(c,0);a[0]=c;a.tag=b("bs_obj").forward_tag;return c}catch(b){a[0]=function(){throw b};throw b}}function j(a){var c=a[0];a[0]=h;c=b("bs_curry")._1(c,0);a[0]=c;a.tag=b("bs_obj").forward_tag;return c}function a(a){var c=a.tag|0;if(c===b("bs_obj").forward_tag)return a[0];else if(c!==b("bs_obj").lazy_tag)return a;else return i(a)}function c(a){var c=a.tag|0;if(c===b("bs_obj").forward_tag)return a[0];else if(c!==b("bs_obj").lazy_tag)return a;else return j(a)}f.Undefined=g;f.force_lazy_block=i;f.force_val_lazy_block=j;f.force=a;f.force_val=c}),null);
__d("MessengerSendButtonReact.bs",["fbt","bs_block","LinkReact.bs","bs_belt_Option","ReasonReact.bs","bs_camlinternalLazy","MessengerCustomColorUtils.bs","MessengerSendIconSVGM4React.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("bs_block").__(246,[function(){return g._("Press Enter to send")+("\n"+g._("Press Shift + Enter to add a new paragraph"))}]);function a(a){var c=a.className,d=a.customColor,e=a.onClick;a=a.useIcon;var f=d!==void 0?{color:d}:void 0;a=b("bs_belt_Option").getWithDefault(a,!1);var i=h.tag|0;return b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,c,void 0,"tooltip",i===250?h[0]:i===246?b("bs_camlinternalLazy").force_lazy_block(h):h,void 0,void 0,void 0,void 0,e,void 0,void 0,"button",void 0,f,void 0,void 0,void 0,[a?b("MessengerSendIconSVGM4React.bs").make(b("bs_belt_Option").getWithDefault(d,b("MessengerCustomColorUtils.bs").defaultColor(0))):g._("Send")]))}c=a;f.title=h;f.make=c}),null);
__d("MessengerSendButtonReact.re",["MessengerSendButtonReact.bs"],(function(a,b,c,d,e,f){a=b("MessengerSendButtonReact.bs").make;f.make=a}),null);
__d("ReasonBootloadOnInteraction.react",["React","ReasonBootloadOnRender.react"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={hadUserInteraction:!1},c.$1=function(){c.setState({hadUserInteraction:!0})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){if(!this.state.hadUserInteraction)return b("React").cloneElement(this.props.placeholder,{onFocus:this.$1,onMouseOver:this.$1,onClick:this.$1});var a=this.props,c=a.loader,d=a.component;a=a.placeholder;return b("React").createElement(b("ReasonBootloadOnRender.react"),{placeholder:a,loader:c,component:d})};return c}(b("React").Component);e.exports=a}),null);
__d("MercuryMessageBodyReact.bs",["ReasonReact.bs","MercuryMessageBody.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MercuryMessageBody.react"),{body:a},c)}f.make=a}),null);
__d("ReplyingToMessageReact.bs",["ix","cx","fbt","Image.bs","React","asset","ReasonReact.bs","bs_js_primitive","XUICloseButtonReact.bs","MercuryAttachmentType","MercuryMessageBodyReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").statelessComponent("ReplyingToMessageReact");function k(a,c,d,e,f,h){__p&&__p();return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){__p&&__p();var f,j=0;if(c!==void 0){var k=c;k===""?j=1:f=[b("ReasonReact.bs").element(void 0,void 0,b("MercuryMessageBodyReact.bs").make(k,[])),null]}else j=1;if(j===1){if(d.length!==1)k=[i._({"*":"{number of attachments in message being replied to} attachments","_1":"{number of attachments in message being replied to} attachment"},[i._param("number of attachments in message being replied to",String(d.length)),i._plural(d.length)]),g("596865")];else{j=d[0];var l=j.attach_type===b("MercuryAttachmentType").PHOTO;if(l)k=[i._("Photo"),g("596858")];else{l=j.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE;if(l)k=[i._("GIF"),g("596858")];else{l=j.attach_type===b("MercuryAttachmentType").VIDEO;if(l)k=[i._("Video"),g("596874")];else{l=j.attach_type===b("MercuryAttachmentType").STICKER||j.attach_type===b("MercuryAttachmentType").THIRDPARTYSTICKER;k=l?[i._("Sticker"),g("596858")]:[i._("Attachment"),g("596852")]}}}}f=[k[0],b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make("_6ees",void 0,void 0,void 0,k[1],void 0,void 0,void 0,void 0,[]))]}return b("React").createElement("div",{className:(h?"_692o":"")+" _67tu"},b("ReasonReact.bs").element(void 0,void 0,b("XUICloseButtonReact.bs").make("_67tv",1,h?1:2,e,void 0,[])),i._("Replying to")," ",b("React").createElement("strong",void 0,i._("{name}",[i._param("name",a)])),b("React").createElement("div",{className:"_67tw _1nc6 ellipsis"},f[0],f[1]))},j[9],j[10],j[11],j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(a.name,b("bs_js_primitive").nullable_to_opt(a.body),a.attachments,a.onCancelReplyingToMessage,[],a.isChatTab)});f.component=j;f.make=k;f.jsComponent=a}),null);
__d("WorkGalahadChatSendButton.react",["cssVar","cx","Link.react","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var c=a.customColor,d=a.onClick;a=a.className;c=c!==null?c:"#373e4c";return b("React").createElement(b("Link.react"),{onClick:d,className:b("joinClasses")(a,"_7dch")},b("React").createElement("svg",{className:"_3-8h",width:"20px",height:"20px",viewBox:"0 0 24 24",version:"1.1"},b("React").createElement("g",{id:"workplace-chat-send",stroke:"none",strokeWidth:"1",fill:c,fillRule:"evenodd"},b("React").createElement("path",{d:"M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z",id:"Path",fill:c}))))}e.exports=a}),null);
__d("XMNCommercePageNullStateCTAController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/page/nullstate/",{})}),null);
__d("MessengerComposer.react",["cssVar","cx","fbt","invariant","AsyncRequest","AutoFocusableLink.react","BootloadedComponent.react","Bootloader","BootloadOnRender.react","ChatPhotoUploader.react","CurrentUser","FBLogger","JSResource","LazyComponent.react","MercuryBootloadOnInteraction.react","MercuryConfig","MercuryIDs","MercuryReadOnlyReason","MercuryShareAttachmentRenderLocations","MercuryThreadActions","MessageRequestUtils","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerBlockDialogReact.bs","MessengerBotMenuDataFetcher","MessengerButtonReact.bs","MessengerComposerInput.react","MessengerConfirmBlockThreadDialogReact.bs","MessengerConstants","MessengerContextualDialog.react","MessengerDialogs.bs","MessengerDotComAndInboxM4Check.bs","MessengerFileSizeErrorDialogReact.bs","MessengerHotLikeButton.react","MessengerHotLikeUtils","MessengerMessageRequestsTypedLogger","MessengerParticipants.bs","MessengerQuickCamOrigins","MessengerResponsiveBlock.react","MessengerSendButtonReact.re","MessengerState.bs","MessengerURIStore","MessengerView","MNCommerceCallToActionType","MNCommerceCTAProcessor","MNCommercePageSetting","MNCommercePostbackCTADataManager","MNCommercePostbackRefSendManager","P2PGKValues","React","ReasonBootloadOnInteraction.react","ReasonResource","ReplyingToMessageReact.bs","URI","WorkBotLandingPageHelper","WorkChatExtensionAvailabilityFetcher","WorkFileUploadsGating","WorkGalahadChatSendButton.react","WorkGalahadSettings","XMessagingUnblockMessagesController","XMNCommercePageNullStateCTAController","XUISpinner.react","getPageIDFromThreadID","gkx","immutable","isWebGLEnabled","lazyLoadComponent","promiseDone"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("MessengerBlockDialogReact.bs").jsComponent,l=b("MessengerButtonReact.bs").jsComponent,m=b("MessengerConfirmBlockThreadDialogReact.bs").jsComponent,n=b("MessengerFileSizeErrorDialogReact.bs").jsComponent,o=b("MessengerSendButtonReact.re").make,p=b("ReplyingToMessageReact.bs").jsComponent,q=b("WorkBotLandingPageHelper").shouldShowBotLandingPage,r=b("lazyLoadComponent")(b("JSResource")("WorkChatPostButtonReact").__setRef("MessengerComposer.react")),s=b("lazyLoadComponent")(b("JSResource")("MessengerUnconnectedThreadInfoTextReact").__setRef("MessengerComposer.react")),t=b("lazyLoadComponent")(b("JSResource")("MessengerComposerReJoin.react").__setRef("MessengerComposer.react"));a=b("React").PropTypes;var u=640,v=360,w=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.refsGifUploader=null;d.handleFileUpload=function(a){d.refsUploader&&d.refsUploader.uploadFiles(a),d.exitCurrentMode()};d.focusInput=function(){d.refsInput&&d.refsInput.focus()};d.$49=function(a){d.refsGifUploader=a};d.$53=function(){var a=b("XMessagingUnblockMessagesController").getURIBuilder().getURI(),c=d.props.threadID;new(b("AsyncRequest"))(a).setMethod("POST").setData({fbid:b("MercuryIDs").getUserIDFromThreadID(c)}).send()};d.$21=function(){var a=d.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,c);d.$52()["delete"](d.props.threadID);b("MessengerActions").selectThread(null);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint("inbox_banner").log()};d.$20=function(){__p&&__p();var a;a=(a=d.props)!=null?(a=a.thread)!=null?a.thread_id:a:a;a=b("MercuryIDs").isGroupChat(a);if(a)d.$57();else{a=(a=d.props)!=null?(a=a.thread)!=null?a.other_user_fbid:a:a;var c=a?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)):null,e=c&&c.short_name;e&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(k,{onBlock:function(){d.$58(e)},contact:c})})}};d.$22=function(a){var c=d.props.thread,e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,e);c=!!c&&b("MessageRequestUtils").isFiltered(c);a||new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(e).setEntryPoint("inbox_banner").log()};d.$50=function(a,c){a.platformFBID.toString()===b("MercuryConfig").MessengerAppID?d.props.onStickerSelect(a.resultID.toString()):d.refsGifUploader&&d.refsGifUploader.uploadURL&&d.refsGifUploader.uploadURL({attribution_app_id:a.platformFBID,external_image_url:a.source.url,preview_url:a.media.preview?a.media.preview.url:a.media.thumbnail.url,source:a.source})};d.$51=function(a){d.focusInput(),d.refsInput&&d.refsInput.insertEmoji(a)};d.$17=function(a){d.setState({currentValue:a})};d.$16=function(a,b,c){d.refsEmojiButton&&d.refsEmojiButton.hideFlyout();return d.props.onMessageSend&&d.props.onMessageSend(a,b,c)};d.$47=function(a){d.refsInput&&d.refsInput.triggerSend()};d.$48=function(a){return d.props.onStickerSelect(a)};d.$11=function(){if(d.state.nullStateCTA!==null)switch(d.state.nullStateCTA.action_type){case b("MNCommerceCallToActionType").OPEN_NATIVE:break;case b("MNCommerceCallToActionType").POSTBACK:default:d.setState({disableNullState:!0});b("MNCommercePostbackRefSendManager").hasMDotMeRef(d.$5())?(b("MNCommercePostbackCTADataManager").sendAndConfirm(d.state.nullStateCTA.id,d.state.nullStateCTA.title,d.props.threadID,null,d.$1,b("MNCommercePostbackRefSendManager").getMdotMeRef()),b("MessengerActions").changeMDotMeReferral()):b("MNCommercePostbackCTADataManager").sendAndConfirm(d.state.nullStateCTA.id,d.state.nullStateCTA.title,d.props.threadID,null,d.$1);b("MNCommerceCTAProcessor").logCTAClick(d.state.nullStateCTA);break}};d.$1=function(){d.setState({showNullState:!0,disableNullState:!1})};d.$55=function(){var a;a=(a=d.props.thread)==null?void 0:a.joinable_mode.link;if(a){a=b("URI").tryParseURI(a);a=a&&a.getQueryData().group_hash;a&&(d.setState({requesting_rejoin:!0}),d.$52().chatJoinThroughHash(a,function(a){d.setState({requesting_rejoin:!1})}))}};d.$1=d.$1.bind(babelHelpers.assertThisInitialized(d));d.state=d.$2();return d}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.threadID!==this.props.threadID||a.thread&&!this.props.thread?(this.setState(this.$2()),a.thread&&this.$3(a.thread,b("getPageIDFromThreadID")(a.threadID))):a.thread&&this.$4(a.thread,b("getPageIDFromThreadID")(a.threadID))&&this.setState({showNullState:!1})};d.componentDidMount=function(){var a=this;this.props.thread&&this.$3(this.props.thread,this.$5());var c=b("gkx")("678608");b("CurrentUser").isWorkUser()&&c&&b("promiseDone")(b("WorkChatExtensionAvailabilityFetcher").checkHasChatExtension(),function(b){return a.setState({hasWorkChatExtension:b})})};d.componentDidUpdate=function(a){(a.canReply!==this.props.canReply||a.replyingToMessage!==this.props.replyingToMessage||a.sharePreview!==this.props.sharePreview||a.fileUploader!==this.props.fileUploader)&&(this.props.onResize&&this.props.onResize()),this.props.replyingToMessage&&a.replyingToMessage!==this.props.replyingToMessage&&this.focusInput(),this.props.thread&&(this.$6(),this.$7())};d.render=function(){__p&&__p();var a=this;if(!this.props.canReply)return this.$8();else if(this.props.thread&&b("MessageRequestUtils").shouldShowComposerPendingActions(this.props.thread)&&!this.state.pendingActionsBypassed)return this.$9();var c=this.props.thread&&this.props.thread.message_count;b("MNCommercePostbackRefSendManager").sendMDotMeRef(this.$5(),c);if(this.state.showNullState&&this.state.nullStateCTA!==null)return b("React").createElement("div",{className:"_2xh0"},this.$10(),b("React").createElement("div",{className:"_2xh4 _59w_"},b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{cta:this.state.nullStateCTA,onClick:this.$11,disabled:this.state.disableNullState,threadID:this.props.threadID}),loader:b("JSResource")("ChatPageComposerNullState.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("XUISpinner.react"),{size:"small"})})));var d=this.$12();c=b("React").createElement(b("MessengerResponsiveBlock.react"),{breakpointsToggles:function(a){return[a!=null&&a<=u,a]}},function(c){var e=c[0];c=c[1];return b("React").createElement("div",{"aria-label":i._("New message"),className:"_4rv3"+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyq":"")+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyv":""),role:"region"},a.props.thread&&b("MessageRequestUtils").shouldShowUnconnectedThreadInfoText(a.props.thread)?a.$13():null,a.props.replyingToMessage&&a.$14(),a.$15(a.props.threadID),b("React").createElement("div",{className:"_5irm"+(e?" _1_73":"")},b("React").createElement(b("MessengerComposerInput.react"),{disableAutofocus:!!a.props.disableAutofocus,fileUploader:a.props.fileUploader,handleOnlyImageUploads:!1,isComposing:d,mentionsEnabled:a.props.mentionsEnabled,ref:function(b){return a.refsInput=b},onBeforeInput:function(){return a.refsEmojiButton&&a.refsEmojiButton.hideFlyout()},onResize:a.props.onResize,onMessageSend:a.$16,participants:a.props.participants,sharePreview:a.props.sharePreview,smallerEqual640:e,thread:a.props.thread,threadID:d?b("MessengerConstants").NEW_THREAD_KEY:a.props.threadID,pageID:a.$5(),viewer:a.props.viewer,onFileUpload:a.handleFileUpload,onChange:a.$17,showMenu:a.state.showMenu,disableInput:a.state.disableInput}),a.$18(c)))});var e=this.$5(),f=d?b("MessengerConstants").NEW_THREAD_KEY:this.props.threadID;return e&&!b("CurrentUser").isWorkUser()?b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{onResize:this.props.onResize,originalElement:c,pageID:e,playLinkClassName:"_2xh6 _2xh7",showGameImage:!1,threadFBID:this.props.threadFBID,threadID:f}),loader:b("JSResource")("MessengerGameBotPlayButton.react").__setRef("MessengerComposer.react"),placeholder:c}):c};d.$15=function(a){__p&&__p();if(!a)return null;var c=this.props.fileUploader;if(!c)return null;c=c.get("uploadedFiles");if(c.size==0)return null;var d=this.props.thread;d=d&&d.footer_color?d.footer_color:"#0084ff";return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{files:c,small:!1,threadID:a,threadCustomColor:d,onClick:this.$19,onResize:this.props.onResize}),loader:b("JSResource")("MercuryStageFilePreviewReactComponent").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("XUISpinner.react"),{className:"_2qf"})})};d.$13=function(){var a;a=(a=this.props.thread)==null?void 0:a.other_user_fbid;if(!a)return null;a=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a));return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(s,{name:a.short_name,onBlock:this.$20,onDelete:this.$21,onToggle:this.$22}))};d.$14=function(){var a=this.props.replyingToMessage;return!a?null:b("React").createElement(p,{name:this.$23(a),body:a.body,attachments:a.attachments,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage})};d.$23=function(a){a=a.author?b("MessengerParticipants.bs").getNow(a.author):null;return a&&a.short_name};d.$19=function(a,c){b("MessengerActions").cancelFileUpload(a,c)};d.$18=function(a){var c=this;return this.state.disableInput===!0?null:b("React").createElement("div",{ref:function(a){c.refsButtonsContainer=a},className:"_4rv4"+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyw":"")},this.$24(a),this.$25())};d.$24=function(a){if(this.props.hideActions)return null;return a&&a<v?b("React").createElement("div",null,b("React").createElement("ul",{className:"_39bj"},this.$26(),this.$27(),this.$28(),this.$29(),this.$30()),b("React").createElement("ul",{className:"_39bj"},this.$31(),this.$32(),this.$33(),this.$34(),this.$35())):b("React").createElement("ul",{className:"_39bj"},this.$26(),b("CurrentUser").isWorkUser()?this.$36():null,this.$27(),b("CurrentUser").isWorkUser()?this.$37():null,this.$28(),this.$29(),this.$30(),this.$31(),this.$32(),this.$33(),this.$34(),this.$35())};d.$38=function(a){b("FBLogger")("messenger_upload_file").warn("Uploading file is too large"),b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(n,{error:a.error})})};d.handleTextDropped=function(a){this.refsInput&&this.refsInput.handleTextDropped(a)};d.$32=function(){return b("React").createElement("li",null,this.$39())};d.$39=function(){var a;if(!b("P2PGKValues").P2PVisible||!this.props.threadID||this.$40()||!this.props.p2pPaymentConfig||((a=this.props)!=null?(a=a.participants)!=null?a.size:a:a)===1)return null;a="_30yy _25pc _39bk";return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:a,ContextualDialog:b("MessengerContextualDialog.react"),thread:this.props.thread,threadID:this.props.threadID,p2pPaymentConfig:this.props.p2pPaymentConfig}),loader:b("JSResource")("P2PSendMoneyContainerBootloader.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:a,role:"button"})})};d.$35=function(){return b("gkx")("678582")&&this.props.threadID?b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:"_4rv5 _39bk"+(this.state.flyoutOpen?" _5jhb":""),location:b("MessengerQuickCamOrigins").MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer}),loader:b("JSResource")("MessengerQuickCamButtonHTML5.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_4rv5 _39bk",role:"button"})}):null};d.$31=function(){return!w||this.$12()?null:b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{onVoiceClipCreate:this.props.onVoiceClipCreate}),loader:b("JSResource")("MessengerVoiceClipButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_4rv7 _39bk _30yy",role:"button"})}))};d.$33=function(){if(this.props.thread&&this.props.thread.is_canonical)return null;return!this.props.threadFBID||this.$12()?null:b("React").createElement("li",null,b("React").createElement(b("ReasonBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("ReasonResource")(b("JSResource")("MessengerGroupPollingButtonReact.bs").__setRef("MessengerComposer.react")),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_39bk _30yy _2o-b",role:"button"})}))};d.$34=function(){var a=b("gkx")("678262")&&b("isWebGLEnabled")();return a&&this.props.threadFBID&&!this.$40()?b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("JSResource")("MessengerGamesButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_39bk _30yy _4ce_",role:"button"})})):null};d.$26=function(){return this.props.threadFBID&&!this.$40()&&this.state.hasWorkChatExtension?b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("JSResource")("MessengerWorkplaceChatExtensionsButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_39bk _22k0 _30yy",role:"button"})})):null};d.$41=function(a){var c=this,d=b("CurrentUser").isWorkUser()?!b("WorkFileUploadsGating").canUploadFiles:!1;return b("React").createElement("li",{className:"_39bk"},b("React").createElement(b("ChatPhotoUploader.react"),{allowCrossPage:!0,disabled:!(this.props.threadID||this.$42()),ref:function(a){return c.refsUploader=a},imageClassName:(a=="files"?"_5vn8":"")+(a=="attachment"?" _46si":""),imagesOnly:d,inputClassname:"_260t",linkClassName:"_30yy _7hi7 _260u",focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$38,threadID:this.props.threadID}))};d.$27=function(){return this.$41("files")};d.$36=function(){return!b("WorkFileUploadsGating").canUploadFiles?null:this.$41("attachment")};d.$37=function(){var a,c=this.props.openPostComposerInSameWindow?"_self":"_blank";a=(a=this.props)!=null?(a=a.thread)!=null?(a=a.associated_object)!=null?a.action_link:a:a:a;if(!a){var d;a=(d=this.props)!=null?(d=d.thread)!=null?(d=d.work_associated_group)!=null?d.url:d:d:d}return a?b("gkx")("808098")?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(r,{composerLink:a,target:c})):null:null};d.$43=function(){return this.state.currentValue.length>0||this.$44()||this.$45()};d.$44=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadedFiles").size>0)};d.$45=function(){var a=this.props.sharePreview;return!!(a&&a.params&&a.type)};d.$46=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadingFiles").size>0)};d.$25=function(){var a=!(this.props.threadID||this.$42());return!a&&this.$43()&&!this.$46()?b("WorkGalahadSettings").isGalahadEnabled?b("React").createElement(b("WorkGalahadChatSendButton.react"),{customColor:this.props.thread?this.props.thread.solid_color:null,onClick:this.$47,className:(this.props.threadID?"_30yy":"")+" _38lh"}):b("React").createElement(o,{className:(this.props.threadID?"_30yy":"")+" _38lh",customColor:this.props.thread&&this.props.thread.solid_color,onClick:this.$47}):b("React").createElement(b("MessengerHotLikeButton.react"),{className:"_4rv9"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6ymq":"")+(this.props.threadID?" _30yy":""),disabled:a,customColor:this.props.thread&&this.props.thread.solid_color,customLike:b("MessengerHotLikeUtils").getCustomEmojiFromThread(this.props.thread)||void 0,sendSticker:this.$48,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID,renderSize:24,thread:this.props.thread})};d.$28=function(){var a=this,c=(this.props.threadID?"_30yy":"")+" _4rv6 _39bk";return b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:c,ContextualDialogClass:b("MessengerContextualDialog.react"),disabled:!(this.props.threadID||this.$42()),getInput:function(){return a.refsInput},flyoutAlignment:"right",flyoutClassName:"_293j",flyoutWidth:285,onStickerSelect:this.props.onStickerSelect,threadID:this.props.threadID}),loader:b("JSResource")("ChatStickerButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:c,role:"button"})}))};d.$10=function(){__p&&__p();var a;a=(a=this.props)!=null?(a=a.thread)!=null?a.other_user_fbid:a:a;a=a?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)):null;var c=a&&a.name||"page";if(this.state.nullStateCTA!==null)switch(this.state.nullStateCTA.action_type){case b("MNCommerceCallToActionType").OPEN_NATIVE:return null;case b("MNCommerceCallToActionType").POSTBACK:if(!b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$5())&&!this.state.nullStateCTA.instantgame_metadata&&!b("CurrentUser").isWorkUser())return b("React").createElement("div",{className:"_3zc8"},i._("When you tap {cta title}, {name} will see your public info.",[i._param("cta title",this.state.nullStateCTA.title),i._param("name",c)]));else if(b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$5())){var d=this.$5();a=a&&a.vanity?"m.me/"+a.vanity:d?"m.me/"+d:"m.me";return b("React").createElement("div",{className:"_3zc8"},i._("When you tap {cta title}, {name} will see your public info and that you opened their {link} link.",[i._param("cta title",this.state.nullStateCTA.title),i._param("name",c),i._param("link",a)]))}break;default:return null}return null};d.$29=function(){var a=this,c=(this.props.threadID?"_30yy":"")+" _yht _39bk";return b("React").createElement("li",null,b("React").createElement("div",{style:{display:"none"}},b("React").createElement(b("ChatPhotoUploader.react"),{allowCrossPage:!0,disabled:!1,ref:this.$49,imagesOnly:!1,focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$38})),b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:c,ContextualDialogClass:b("MessengerContextualDialog.react"),getInput:function(){return a.refsInput},getQuery:function(){return a.refsInput?a.refsInput.getValue():""},location:b("MercuryShareAttachmentRenderLocations").MESSENGER,onSelect:this.$50}),loader:b("JSResource")("ChatContentSearchButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:c,role:"button"})}))};d.$30=function(){var a=this,c=(this.props.threadID?"_30yy":"")+" _5s2p _39bk";return b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:c,ContextualDialogClass:b("MessengerContextualDialog.react"),flyoutAlignment:"right",getInput:function(){return a.refsInput},onSelect:this.$51,onMount:function(b){return a.refsEmojiButton=b},sendCustomEmoji:this.props.onCustomLikeSelect,threadID:this.props.threadID}),loader:b("JSResource")("ChatEmojiButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:c,role:"button"})}))};d.$9=function(){__p&&__p();var a=this,c=this.props.thread,d=!!c&&b("MessageRequestUtils").isFiltered(c);c=b("CurrentUser").getID();var e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,c);return b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",{style:{height:51}}),bootloadLoader:b("JSResource")("MessengerPendingActions.react").__setRef("MessengerComposer.react"),folder:this.props.thread&&this.props.thread.folder,onAcceptClick:function(){a.$52().changeFolder(a.props.threadID,b("MessagingTag").INBOX),a.setState({pendingActionsBypassed:!0},function(){return new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID)).setSurface("thread").setFolderType(d?"other":"pending").setThreadKey(e).setEntryPoint(null).log()})},onDeclineClick:function(){var c=b("MercuryIDs").isGroupChat(a.props.threadID);b("Bootloader").loadModules(["MessengerDeclineDialogReact.bs"],function(d){var f=d.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(f,{onBlock:a.$20,onDelete:a.$21,onToggle:a.$22,isGroupChat:c})});new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID)).setSurface("thread").setFolderType("pending").setThreadKey(e).setEntryPoint("inbox_banner").log()},"MessengerComposer.react")},onDeleteClick:function(){b("Bootloader").loadModules(["MessengerFilteredDeleteDialogReact.bs"],function(c){var d=c.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(d,{onDelete:a.$21,onToggle:a.$22})})},"MessengerComposer.react"),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID)).setSurface("thread").setFolderType("other").setThreadKey(e).setEntryPoint("inbox_banner").log()}})};d.$8=function(){__p&&__p();if(!this.props.thread||this.props.view===b("MessengerView").DETAIL.COMPOSE)return null;var a=this.props.thread,c=this.props.participants,d=!1,e=!1;if(a.cannot_reply_reason==="blocked"){d=!0;a.is_canonical===!0||j(0,4973);c!=null||j(0,4974);var f=a.other_user_fbid;f!=null||j(0,4975);c=c.get(b("MercuryIDs").getParticipantIDFromUserID(f));c!=null||j(0,4976);c.is_messenger_blocked&&(e=!0)}if(d)if(e)return b("React").createElement("div",{className:"_4rv3"},b("React").createElement("div",{className:"_2wy4"},i._("You've blocked messages from this person. {unblock_now_button}",[i._param("unblock_now_button",b("React").createElement(l,{label:i._("Unblock now"),onClick:this.$53,type:"secondary"}))])));else return b("React").createElement("div",{className:"_4rv3"},b("React").createElement("div",{className:"_2wy4"},i._("This person isn't available at the moment.")));return this.$54()?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(t,{thread:a,onActionClick:this.$55,requesting:this.state.requesting_rejoin})):b("React").createElement("div",{className:"_4rv3"},b("React").createElement("div",{className:"_2wy4"},b("MercuryReadOnlyReason").getReason(a.has_email_participant)))};d.$56=function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)};d.$57=function(){var a;a=(a=this.props)!=null?(a=a.thread)!=null?a.thread_id:a:a;if(a){var c=b("MessengerURIStore").getState().activeThreadID===a;this.$56().changeFolder(a,"other");c&&b("MessengerActions").selectThread(null)}};d.$58=function(a){var c=this,d=this.props.threadID,e=d===b("MessengerURIStore").getState().activeThreadID;this.$56().blockIgnoreOnMessengerDotCom(e,d,function(){c.$59(a)})};d.$59=function(a){var c=this.props,d=c.threadID;c=c.thread;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(m,{participantName:a})});var e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d,e);c=!!c&&b("MessageRequestUtils").isFiltered(c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(e).setEntryPoint(null).log()};d.exitCurrentMode=function(){this.refsInput&&this.refsInput.exitCurrentMode()};d.$12=function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE};d.$42=function(){return!!(this.$12()&&this.props.recipients&&this.props.recipients.size)};d.$40=function(){return!!this.$5()};d.$5=function(){return b("getPageIDFromThreadID")(this.props.threadID)};d.$6=function(){var a=this,c=this.$5();c?b("MessengerBotMenuDataFetcher").getHasPageSetting(c,function(b){a.setState({showMenu:b})},function(){a.setState({showMenu:!1})},b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED):this.setState({showMenu:!1})};d.$7=function(){var a=this,c=this.$5();c?b("MessengerBotMenuDataFetcher").getHasPageSetting(c,function(b){a.setState({disableInput:b})},function(){a.setState({disableInput:!1})},b("MNCommercePageSetting").COMPOSER_INPUT_DISABLED):this.setState({disableInput:!1})};d.$4=function(a,c){var d=a.message_count;c=!!c;if(b("CurrentUser").isWorkUser()&&c&&d===1&&this.props.viewer){c=b("MessengerState.bs").getThreadMessagesRangeNow(this.props.viewer,a.thread_id,0,1);return!q(b("immutable").List(c))}return d>0};d.$60=function(a,b){b=q(b);var c=!!a;c&&b&&this.$61(a)};d.$61=function(a){var c=b("XMNCommercePageNullStateCTAController").getURIBuilder();new(b("AsyncRequest"))().setURI(c.getURI()).setMethod("POST").setData({page_id:a}).setHandler(function(a){a&&a.payload?this.setState({showNullState:!0,nullStateCTA:a.payload}):this.setState({showNullState:!1,disableNullState:!1})}.bind(this)).send()};d.$3=function(a,c){var d=this,e=a.message_count,f=!!c;if(b("CurrentUser").isWorkUser()&&f&&e===1&&this.props.viewer){b("MessengerState.bs").getThreadMessagesRange(this.props.viewer,a.thread_id,0,1,function(a){return d.$60(c,b("immutable").List(a||[]))});return}a=e===0;f&&a?this.$61(c):this.setState({showNullState:!1,disableNullState:!1})};d.$2=function(){return{pendingActionsBypassed:!1,currentValue:"",nullStateCTA:null,showMenu:!1,disableInput:!1,showNullState:!1,disableNullState:!1}};d.$52=function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)};d.$54=function(){var a=this.props,c=a.thread;a=a.viewer;if(!c||!a)return!1;a=c.participants.includes(b("MercuryIDs").getParticipantIDFromUserID(a));c=b("MessengerAdminGroupUtils").isWorkFroup(c);return c&&!a};d.testUtils_renderRawP2PSendMoneyButton=function(){return this.$39()};d.replyToMention=function(a){this.refsInput&&this.refsInput.addMention&&this.refsInput.addMention(a)};return c}(b("React").PureComponent);c.propTypes={canReply:a.bool,disableAutofocus:a.bool,fileUploader:a.object,hideActions:a.bool,mentionsEnabled:a.bool,onCustomLikeSelect:a.func,onMessageSend:a.func,onPhotoUploadComplete:a.func,onPhotoUploadCancel:a.func,onPhotoUploadFail:a.func,onPhotoUploadSubmit:a.func,onResize:a.func,onStickerSelect:a.func.isRequired,onVoiceClipCreate:a.func,p2pPaymentConfig:a.object,participants:a.instanceOf(b("immutable").Map),recipients:a.instanceOf(b("immutable").List),sharePreview:a.object,threadID:a.string,threadFBID:a.string,thread:a.object,view:a.string,viewer:a.string,replyingToMessage:a.object,onCancelReplyingToMessage:a.func,openPostComposerInSameWindow:a.bool};e.exports=c}),null);
__d("MessengerDialogs.re",["bs_curry","MessengerDialogs.bs"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){var c=b("MessengerDialogs.bs").showDialog(function(b){b=a(b);return b});return c};f.showDialog=a;c=function(a,c){c=b("bs_curry")._2(b("MessengerDialogs.bs").removeDialog,function(b){b=a.dialog(b);return b},c);return c};f.removeDialog=c}),null);
__d("MessengerContentSearchFunnelLoggerConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({BROWSE_MESSAGE_IN_THREAD:"browse_message_in_thread",CHANGE_QUERY:"change_query",END_CONTENT_SEARCH:"end_content_search",INITIATE_CONTENT_SEARCH:"initiate_content_search",LOAD_MORE_THREADS:"load_more_threads",NUM_BROWSE_ACTIONS_WITHIN_THREAD:"num_browse_actions_within_thread",SELECT_THREAD:"select_thread",THREAD_IMPRESSIONS:"thread_impressions",LOAD_MESSAGE_IN_THREAD:"load_message_in_thread",BROWSE_CONTEXT:"browse_context"});b=Object.freeze({SEARCH_WITHIN_THREAD:"search_within_thread",SEARCH_ALL_THREADS:"search_all_threads",END_WITH_DONE_BUTTON:"end_with_done_button",END_WITH_X_BUTTON:"end_with_x_button",END_WITH_BACK_BUTTON:"end_with_back_button"});e.exports={FUNNEL_NAME:"WWW_MESSENGER_CONTENT_SEARCH_FUNNEL",FUNNEL_LOGGER_EVENTS:a,FUNNEL_LOGGER_TAGS:b}}),null);
__d("MessengerContentSearchFunnelLogger",["FunnelLogger","MessengerContentSearchFunnelLoggerConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_NAME,h=b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_EVENTS,i=null,j=0,k=0,l=new Set(),m=0,n=0;function a(a,c){i!==null&&b("FunnelLogger").appendActionWithPayload(g,h.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:i,numBrowseActions:j,numContextBrowse:n,msgs:Array.from(l)}),i=null,j=0,k=0,n=0,l.clear(),m=Date.now(),b("FunnelLogger").startFunnel(g),c&&b("FunnelLogger").addFunnelTag(g,c),b("FunnelLogger").setFunnelTimeout(g,86400),b("FunnelLogger").appendActionWithPayloadIfNew(g,h.INITIATE_CONTENT_SEARCH,{query:a})}function c(a){b("FunnelLogger").appendActionWithPayload(g,h.CHANGE_QUERY,{query:a})}function d(a){b("FunnelLogger").appendActionWithPayload(g,h.THREAD_IMPRESSIONS,{impressionList:a,latency:Date.now()-m})}function f(a,c){b("FunnelLogger").appendActionWithPayload(g,h.LOAD_MORE_THREADS,{impressionList:a,latency:c})}function o(){n+=1}function p(a,c){i!==null&&b("FunnelLogger").appendActionWithPayload(g,h.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:i,numBrowseActions:j,numContextBrowse:n,msgs:Array.from(l)}),i=a,j=0,n=0,l.clear(),b("FunnelLogger").appendActionWithPayload(g,h.SELECT_THREAD,{thread_id:a,has_results:c})}function q(a){j+=1,k+=1}function r(a,c,d){i=c,l.add(a),b("FunnelLogger").appendActionWithPayload(g,h.LOAD_MESSAGE_IN_THREAD,{latency:d})}function s(a){i!==null&&b("FunnelLogger").appendActionWithPayload(g,h.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:i,numBrowseActions:j,numContextBrowse:n,msgs:Array.from(l)}),a?b("FunnelLogger").appendActionWithTagAndPayloadIfNew(g,h.END_CONTENT_SEARCH,a,{totalBrowseActions:k}):b("FunnelLogger").appendActionWithPayloadIfNew(g,h.END_CONTENT_SEARCH,{totalBrowseActions:k}),b("FunnelLogger").endFunnel(g)}e.exports={browseMessageInThread:q,endFunnel:s,loadMessageInThread:r,logContextBrowse:o,logChangeQuery:c,logLoadMoreThreads:f,logThreadImpressions:d,logThreadSelect:p,startFunnel:a}}),null);
__d("MessengerThreadSearchIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"22px",width:"22px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"magnifying-glass",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{id:"Search"},b("React").createElement("polygon",{id:"Bounding-Box",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-1",d:"M15.499,9.000053 C11.909,9.000053 8.9995,11.9106492 8.9995,15.5009175 C8.9995,19.0911858 11.909,22.0022817 15.499,22.0022817 C19.0885,22.0022817 21.998,19.0911858 21.998,15.5009175 C21.998,11.9106492 19.0885,9.000053 15.499,9.000053 Z M25.4875,28.30874 L21.6335,23.8523894 C21.313,23.482068 20.7755,23.4056049 20.355,23.6574834 C18.934,24.5085729 17.276,25.0023347 15.499,25.0023347 C10.253,25.0023347 6,20.7483865 6,15.5009175 C6,10.2539482 10.253,6 15.499,6 C20.7445,6 24.9975,10.2539482 24.9975,15.5009175 C24.9975,17.2770608 24.5045,18.9357608 23.655,20.3565755 C23.4065,20.7708757 23.491,21.3016197 23.8555,21.6184668 L28.3065,25.4841024 L25.4875,28.30874 Z M28.3065,25.4841024 C29.183,26.2452352 29.231,27.5915859 28.4105,28.4131896 C27.591,29.2352931 26.247,29.1873162 25.4875,28.30874 L28.3065,25.4841024 Z",fill:"#000000"}))));f.icon=a}),null);
__d("MessengerThreadSearchIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"8 8 48 48"},b("React").createElement("title",void 0,"search conversation"),b("React").createElement("circle",{cx:"28",cy:"28",fill:"none",r:"14",stroke:c,strokeMiterlimit:"10",strokeWidth:"2"}),b("React").createElement("path",{clipRule:"evenodd",d:"M50,50L37.9,37.9",fill:"none",fillRule:"evenodd",stroke:c,strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2"})))}f.make=a}),null);
__d("MessengerInfoPanelSearchReact.bs",["ix","cx","fbt","Keys","bs_curry","Image.bs","React","Bootload.bs","asset","Bootloader","CurrentUser","ReasonReact.bs","MessengerActions","MessengerURIStore","MessengerCustomColorUtils.bs","MessengerDotComAndInboxM4Check.bs","MessengerThreadSearchIconSVGReact.bs","MessengerContentSearchFunnelLogger","MessengerThreadSearchIconSVGM4React.bs","MessengerContentSearchFunnelLoggerConstants"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["BootloadableMessengerContentSearchFunnelLogger.bs"],a,"MessengerInfoPanelSearchReact.bs");return 0}c=[a];var j=b("Bootload.bs").Create(c);function k(a,c){b("MessengerContentSearchFunnelLogger").startFunnel(a,b("MessengerContentSearchFunnelLoggerConstants").SEARCH_WITHIN_THREAD);return 0}function l(){var a=b("MessengerURIStore").getState().query;a=a==null;b("MessengerActions").changeQuery(a?"":void 0);return 0}function m(a){var c=b("MessengerURIStore").getState().query,d=c==null?"":c;a.preventDefault();b("bs_curry")._1(j[0],function(a){return k(d,a)});return l(0)}function n(a){if(a.keyCode===b("Keys").RETURN){a.preventDefault();return l(0)}else return 0}var o=b("MessengerDotComAndInboxM4Check.bs").yes?"_3szo _6y4w":"_3szo",p=b("ReasonReact.bs").statelessComponent("MessengerInfoPanelSearchReact");function q(a,c){return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],function(){return b("React").createElement("div",{className:o,tabIndex:0,onKeyDown:n,onClick:m},b("React").createElement("div",{className:"_3szp"},b("CurrentUser").isWorkUser()?b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,g("465522"),void 0,void 0,void 0,void 0,[])):b("MessengerDotComAndInboxM4Check.bs").yes?b("React").createElement("div",{className:"_6ybv"},b("MessengerThreadSearchIconSVGM4React.bs").icon):b("MessengerThreadSearchIconSVGReact.bs").make("_6b45",b("MessengerCustomColorUtils.bs").customColorOrBlue(a))),b("React").createElement("div",{className:"_3szq"},i._("Search in Conversation")))},p[9],p[10],p[11],p[12]]}d=b("ReasonReact.bs").wrapReasonForJs(p,function(a){return q(a.thread,[])});f.BootloadableMessengerContentSearchFunnelLogger=c;f.LoadableMessengerContentSearchFunnelLoggerRe=j;f.handleLoggerLoad=k;f.showQuery=l;f.handleSearchThreadClick=m;f.handleSearchThreadKeyDown=n;f.rowClasses=o;f.component=p;f.make=q;f.jsComponent=d}),null);
__d("MessengerPage",["EventEmitter","EventEmitterWithHolding","EventHolder","keyMirror","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";a={Events:b("keyMirror")({APP_MOUNTED:null,DATA_INITIALIZED:null,JS_LOADED:null}),addRetroactiveListener:function(a,b){return g.addRetroactiveListener(a,b)},emit:function(a){g.emitAndHold(a,b("performanceAbsoluteNow")())},removeCurrentListener:function(){g.removeCurrentListener()}};var g=new(b("EventEmitterWithHolding"))(new(b("EventEmitter"))(),new(b("EventHolder"))());e.exports=a}),null);
__d("MessengerPromotionDataDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,{strict:!0})||this}return b}(b("ExplicitRegistrationReactDispatcher"));e.exports=new a()}),null);
__d("MessengerURIListener",["MessengerActions","MessengerURISerializer","PageTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1;a={start:function(){g||b("PageTransitions").registerHandler(h,6),g=!0},stop:function(){b("PageTransitions").removeHandler(h,6),g=!1}};function h(a){a=b("MessengerURISerializer").deserialize(a);if(a.notMessenger)return!1;b("PageTransitions").transitionComplete();b("MessengerActions").changeState(a);return!0}e.exports=a}),null);
__d("MercuryThreadlistContainer.react",["LogHistory","MercuryAPIArgsSource","MercuryFilters.bs","MercuryServerRequests","MercuryThreadlistConstants","MessagingTag","MessengerConfig","MessengerState.bs","React","SubscriptionsHandler","emptyFunction","gkx","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;var g="search";c=3;var h=5e3,i=b("MercuryThreadlistConstants").JEWEL_THREAD_COUNT+c,j=b("LogHistory").getInstance("threadlist_container");function k(a,b,c){a=a[b];return a?a[c]:null}function l(a,b,c){a=k(a,b,c);return a?a.reachedEnd:!1}d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),i=0;i<e;i++)f[i]=arguments[i];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isLoading:null,isSearching:!1,unreadMessageRequestThreads:[],threads:b("immutable").Map(),pinnedThreads:[]},d.$4=function(){var a=function(){d.setState({suspended:!1}),d.handleThreadListUpdate()};b("gkx")("678640")&&(d.setState({suspended:!0}),setTimeout(a,h))},d.$7=function(){!d.state.isSearching&&!d.state.isLoading&&!l(d.props.threadlistOrderMap,d.props.folder,d.props.filter)&&d.$12(d.props.folder,d.props.filter,b("MercuryThreadlistConstants").JEWEL_MORE_COUNT+1)},d.$9=function(a,c){d.setState({searchThreads:[]},function(){return d.$2(g,b("MercuryFilters.bs").all,a)})},d.$8=function(a){d.setState({isSearching:!!a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1(this.props.threadlistOrderMap,this.props.folder,this.props.filter),this.$2(this.props.folder,this.props.filter)};d.UNSAFE_componentWillReceiveProps=function(a){(a.folder!==this.props.folder||a.filter!==this.props.filter)&&this.$1(a.threadlistOrderMap,a.folder,a.filter);var b=this.state.isLoading;if(b&&a.folder===b.folder&&a.filter===b.filter){var c=k(a.threadlistOrderMap,a.folder,a.filter);(c&&c.threadlist.length>=b.limit||l(a.threadlistOrderMap,a.folder,a.filter))&&this.setState({isLoading:null})}this.$2(a.folder,a.filter)};d.componentWillUnmount=function(){this.$3()};d.handleThreadListUpdate=function(){this.$2(this.props.folder,this.props.filter)};d.$5=function(){var a=this,c=k(this.props.threadlistOrderMap,b("MessagingTag").PENDING,b("MercuryFilters.bs").unread);return!c?[]:c.threadlist.map(function(b){return a.props.threads[b]})};d.$6=function(a){return this.state.isSearching?this.state.threads.get(g)||[]:this.state.threads.get(a)||[]};d.render=function(){var a=this.props,c=a.ChildClass,d=a.folder,e=a.filter,f=a.threadlistOrderMap;a=babelHelpers.objectWithoutPropertiesLoose(a,["ChildClass","folder","filter","threadlistOrderMap"]);var g=this.$6(d,e);return b("React").createElement(c,babelHelpers["extends"]({},a,{filter:e,folder:d,isLoaded:l(f,d,e),isLoading:!!this.state.isLoading,isSearching:this.state.isSearching,maxHeight:this.props.maxHeight,newMessageRequestThreads:this.$5(),onRenderThreads:this.props.onRenderThreads,onMessageRequestsClick:this.props.onMessageRequestsClick,pendingFolderUnseenCount:this.props.pendingFolderUnseenCount,threads:g,pinnedThreads:this.state.pinnedThreads,onLoadMoreRequest:this.$7,onQuery:this.$8,onSearchResults:this.$9,maxInitialThreadCount:i,handleChatTabOpen:this.props.source==="jewel"&&b("gkx")("678640")?this.$4:b("emptyFunction")}))};d.$1=function(a,c,d){var e=this;c===b("MessagingTag").INBOX&&(b("gkx")("678596")||this.props.source!==b("MercuryAPIArgsSource").JEWEL)&&this.$10();!this.$11(c,d,a)?this.$12(c,d,i):this.state.isLoading?this.setState({isLoading:null},function(){e.$2(c,d)}):this.$2(c,d)};d.$10=function(){if(l(this.props.threadlistOrderMap,b("MessagingTag").PENDING,b("MercuryFilters.bs").unread))return;b("MercuryServerRequests").getForFBID(this.props.viewer).fetchThreadlistInfo(0,b("MercuryThreadlistConstants").MAX_UNREAD_COUNT,b("MessagingTag").PENDING,b("MercuryFilters.bs").unread,this.props.source,null)};d.$13=function(a,b){var c=k(this.props.threadlistOrderMap,a,b);c=c?c.threadlist:[];c=c&&c.length>0?c[c.length-1]:null;if(!c)return null;c=this.props.threads[c];var d=c?c.timestamp:null;a==="inbox"&&b==="all"&&j.debug("load threads after timestamp "+d,c?c.thread_id:null);return d};d.$12=function(a,c,d){var e=this,f=function(){b("MercuryServerRequests").getForFBID(e.props.viewer).fetchThreadlistInfo(b("MercuryThreadlistConstants").RECENT_THREAD_OFFSET,d,a,c===b("MercuryFilters.bs").all?null:c,e.props.source,e.$13(a,c))};this.setState({isLoading:{folder:a,filter:c,limit:d}},f)};d.$2=function(a,c,d){var e=this;this.$3();c=k(this.props.threadlistOrderMap,a,c);var f=d||(c?c.threadlist:[]);d=[].concat.apply([],f);this.$14=b("MessengerState.bs").getMultiThreadMeta(this.props.viewer,d,function(b){e.setState({threads:e.state.threads.set(a,e.$15(f,b))})});this.$16()};d.$16=function(){var a=this,c=b("MessengerState.bs").getPinnedThreadlist(this.props.viewer);b("MessengerConfig").MPT>0&&c.reverse();b("MessengerState.bs").getMultiThreadMeta(this.props.viewer,c,function(b){a.setState({pinnedThreads:a.$15(c,b)})})};d.$15=function(a,b){return a.map(function(a){if(Array.isArray(a))return a.map(function(a){return b[a]});else return b[a]})};d.$17=function(){var a=this,c=k(this.props.threadlistOrderMap,b("MessagingTag").PENDING,b("MercuryFilters.bs").unread),d=c?c.threadlist:[];b("MessengerState.bs").getMultiThreadMeta(this.props.viewer,d,function(b){a.setState({unreadMessageRequestThreads:d.map(function(a){return b[a]})})})};d.$11=function(a,b,c){var d=i,e=k(c,a,b);return!!(e&&(e.threadlist.length>=d||l(c,a,b)))};d.$3=function(){this.$14&&b("MessengerState.bs").unsubscribeThread(this.props.viewer,this.$14)};return c}(b("React").Component);d.propTypes={blockedIds:a.any,ChildClass:a.func.isRequired,filter:a.string.isRequired,folder:a.string.isRequired,maxHeight:a.number,onMessageRequestsClick:a.func,onRenderThreads:a.func,pendingFolderUnseenCount:a.number,showCount:a.bool,showPresence:a.bool,source:a.string,threadCount:a.number,threadIDs:a.array,threads:a.object.isRequired,threadlistOrderMap:a.object.isRequired,viewer:a.string.isRequired};d.defaultProps={source:b("MercuryAPIArgsSource").JEWEL};e.exports=d}),null);
__d("MercurySearchSnippetResults",["MercuryAPIArgsSource","MercuryPayloadSource","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MercurySingletonMixin","MercuryThreadIDMap","MercuryThreadlistConstants","MessengerEnvironment","MessengerServerPayloadTransformer.bs","RangedCallbackManager"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MessengerEnvironment").messengerui?b("MercuryAPIArgsSource").MESSENGER:b("MercuryAPIArgsSource").WEBMESSENGER,h={},i={},j=null,k=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_COUNT,l=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_LIMIT,m=b("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_MORE;a=function(){"use strict";__p&&__p();function a(a){var c=this;this.$1=a;this.$2=b("MercuryServerPayloadPreprocessor").getForFBID(a);b("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_snippets.php":{request_user_id:a,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a){c.handleUpdate(a)}}});this.$3=b("MercuryThreadIDMap").getForFBID(a)}var c=a.prototype;c.getFBID=function(){return this.$1};c.getThreadIDMap=function(){return this.$3};c.getAllThreadSearchResults=function(a,b){a&&n(this.$1,a,l,0,b)};c.getAllLocalThreadSearchResults=function(a,b){if(a){var c=h[a];if(c){c=c.getCurrentArraySize();n(this.$1,a,0,c,b)}}};c.getAllThreadSearchMoreResults=function(a,b){if(a){var c=h[a];if(c){c=c.getCurrentArraySize();n(this.$1,a,m,c,b)}}};c.getSingleThreadSearchResults=function(a,b,c){if(!a||!b)return;o.call(this,a,b,k,0,c)};c.getSingleThreadSearchMoreResults=function(a,b,c){__p&&__p();if(!a||!b)return;if(!i[b])return;var d=i[b][a];if(d){var e=d.num_total_snippets;d=d.snippets_cbm.getCurrentArraySize();e=e-d;if(e>0){e=e>m?m:e;o.call(this,a,b,e,d,c)}}};c.countSnippetsMatchingQueryInThread=function(a,b){b=i[b][a];if(b)return b.num_total_snippets};c.findIndexOfSnippet=function(a,b,c,d){d=t(a,b);a=d.getAllResources();for(var b=0;b<a.length;b++)if(c===a[b].message_id)return b};c.findSnippetAtIndex=function(a,b,c,d){q(a,b,c),r.call(this,a,b,c,d)};c.handleUpdate=function(a){__p&&__p();var c=this;if(a.graphql_payload){var d=(a.graphql_payload.message_threads||[]).map(function(d){return b("MessengerServerPayloadTransformer.bs").transformThread(c.$1,d,a.is_page)});this.$2.handleUpdate({threads:d,payload_source:b("MercuryPayloadSource").SERVER_SEARCH})}else a.mercury_payload&&this.$2.handleUpdate(a.mercury_payload);var e=a.search_snippets||{};Object.keys(e).filter(function(a){return!!e[a]}).forEach(function(a){Object.keys(e[a]).forEach(function(b){if(!e[a][b].snippets)return;e[a][b].snippets.forEach(function(a){a.matched_keywords=p(a.matched_keywords)})})});d=a.offset;var f=[];for(var g in e){var h=e[g];for(var j in h){var k=h[j],l=a.other_user_fbid||a.thread_fbid,m=this.$3.getClientIDFromServerIDNow(j),n=k.snippets,o=t(g,m),q=o.getCurrentArraySize();if(!l){f.push(m);if(q)continue}else if(d!=q)continue;m=i[m][g];m.num_total_snippets=k.num_total_snippets;k=n?n.length:0;k>0&&o.addResourcesWithoutSorting(n,q);(!l||a.limit>k)&&(o.getCurrentArraySize()==m.num_total_snippets&&o.setReachedEndOfArray())}if(!l){n=s(g);q=n.getCurrentArraySize();d==q&&(n.addResourcesWithoutSorting(f,q),a.limit>f.length&&n.setReachedEndOfArray())}}};return a}();function n(a,b,c,d,e){__p&&__p();if(j&&!j.thread_id){var f=s(j.query);f.unsubscribe(j.subscriber_id);j=null}var f=s(b),g=d+c;g=f.executeOrEnqueue(0,g,function(a){var c={};for(var d=0;d<a.length;d++){var g=a[d],h=i[g][b];c[g]={num_total_snippets:h.num_total_snippets,snippets:h.snippets_cbm.getAllResources()}}g=f.hasReachedEndOfArray();e(c,g)});var h=f.getUnavailableResources(g);if(h.length){j={query:b,thread_id:null,subscriber_id:g};h={query:b,offset:d,limit:c+1,snippetLimit:k};h.identifier="thread_fbid";u(h,a)}}function o(a,b,c,d,e){__p&&__p();var f=this;if(j&&j.thread_id){var g=t(j.query,j.thread_id);g.unsubscribe(j.subscriber_id);j=null}var g=t(a,b),h=d+c;h=g.executeOrEnqueue(0,h,function(){var d=g.getAllResources(),c=i[b][a].num_total_snippets;e(d,c)});if(!g.getUnavailableResources(h).length)return;j={query:a,thread_id:b,subscriber_id:h};this.getThreadIDMap().getServerIDFromClientID(b,function(b){b={query:a,snippetOffset:d,snippetLimit:c,thread_fbid:b,identifier:"thread_fbid"};u(b,f.getFBID())})}function p(a){if(a instanceof Array){var b={};for(var c=0;c<a.length;c++)b[c.toString()]=a[c];return b}else return a}function q(a,b,c){}function r(a,b,c,d){__p&&__p();var e=i[b][a],f=e.snippets_cbm.getAllResources();e=e.num_total_snippets;var g=f.length;if(c<g){d(f[c].message_id);return}f=e-g;e=f>m?m:f;o.call(this,a,b,e,g,function(e,f){r.call(this,a,b,c,d)})}function s(a){h[a]||(h[a]=new(b("RangedCallbackManager"))());return h[a]}function t(a,c){i[c]||(i[c]={});var d=i[c][a];d||(d={num_total_snippets:-1,snippets_cbm:new(b("RangedCallbackManager"))()},i[c][a]=d);return d.snippets_cbm}function u(a,c){a.client=g,b("MercuryServerDispatcher").trySend("/ajax/mercury/search_snippets.php",a,null,c)}Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("MessengerPromotionDataActions",["MessengerPromotionDataDispatcher"],(function(a,b,c,d,e,f){"use strict";a={setPromotionData:function(a){b("MessengerPromotionDataDispatcher").dispatch({type:"SET_PROMOTION_DATA",promotionData:a})}};e.exports=a}),null);
__d("WorkchatAppKeyboardShortcut.react",["cx","React","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();b("immutable").List;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_2_xt _4lrb"},b("React").createElement("div",{className:"_4lrc"},this.props.label),b("React").createElement("div",{className:"_4lrl"},this.props.keys.map(function(a){return b("React").createElement("span",{className:"_4lrm",key:a},a)})))};return c}(b("React").Component);e.exports=a}),null);
__d("WorkchatAppKeyboardShortcutsDialog.react",["cx","fbt","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogHeaderReact.re","MessengerDialogs.re","MessengerDialogTitleReact.re","React","WorkchatAppKeyboardShortcut.react","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDialogHeaderReact.re").component,j=b("MessengerDialogTitleReact.re").component,k=b("immutable").List,l=function(a){return a==="darwin"?{CmdOrCtrl:"\u2318",Alt:"\u2387",Shift:"\u21e7",Tab:"\u21b9",Up:"\u2191",Down:"\u2193"}:{CmdOrCtrl:"Ctrl",Alt:"Alt",Shift:"Shift",Tab:"Tab",Up:"\u2191",Down:"\u2193"}},m=function(a){a=l(a);return k([{Header:"General",Shortcuts:k([{label:h._("Create new chat"),keys:k([a.CmdOrCtrl,"N"])},{label:h._("Search chats"),keys:k([a.CmdOrCtrl,"K"])},{label:h._("Show\/Hide notifications"),keys:k([a.CmdOrCtrl,"/"])}])},{Header:"Navigation",Shortcuts:k([{label:h._("Go to previous chat"),keys:k([a.Alt,a.Up])},{label:h._("Go to next chat"),keys:k([a.Alt,a.Down])},{label:h._("Go to next element"),keys:k([a.Tab])},{label:h._("Open\/Select element"),keys:k(["Spacebar"])}])},{Header:"In a Conversation",Shortcuts:k([{label:h._("Show\/Hide information"),keys:k([a.CmdOrCtrl,"."])},{label:h._("Mute\/Unmute chat"),keys:k([a.CmdOrCtrl,a.Shift,"M"])},{label:h._("Find in chat"),keys:k([a.CmdOrCtrl,"F"])}])},{Header:"During a Call",Shortcuts:k([{label:h._("Toggle mute"),keys:k(["M"])},{label:h._("Toggle video"),keys:k(["V"])}])}])};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=m(this.props.platform);return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.$1,type:"default",width:560},b("React").createElement(i,null,b("React").createElement(j,null,h._("Keyboard shortcuts")),b("React").createElement(b("MessengerDialogButton.react"),{action:"cancel",label:h._("Done"),type:"primary",use:"default"})),b("React").createElement(b("MessengerDialogBody.react"),null,this.$2(a)))};d.$2=function(a){return b("React").createElement("div",{className:"_4yne"},a.map(function(a,c){return b("React").createElement("div",{className:"_2_xt"+(c!==0?" _4ynf":""),key:a.Header},b("React").createElement("div",{className:"_4ynr"},a.Header),b("React").createElement("div",null,a.Shortcuts.map(function(a){return b("React").createElement(b("WorkchatAppKeyboardShortcut.react"),{key:a.label,keys:a.keys,label:a.label})})))}))};d.$1=function(a){a||b("MessengerDialogs.re").removeDialog({})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("WorkchatAppBridge",["fbt","invariant","Arbiter","CurrentLocale","CurrentUser","MercuryIDs","MercuryThreadActions","MercuryThreadInfo","MercuryThreadInformer","MessengerActions","MessengerDialogs.bs","MessengerInfoPanelSearchReact.bs","MessengerParticipants.bs","MessengerPresenceStatusUtils","MessengerPromotionDataActions","MessengerRTCInvokeHandler","MessengerSettingsActions","MessengerSettingsStore","MessengerState.bs","MessengerURIListener","MessengerURIStore","React","WorkchatAppKeyboardShortcutsDialog.react","gkx","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={TOGGLE_NOTIFICATION_DIALOG:"TOGGLE_NOTIFICATION_DIALOG",getParticipants:function(a,c){var d=b("immutable").Map();return d.withMutations(function(d){a.participants&&a.participants.forEach(function(a){d.set(a,b("MessengerParticipants.bs").getNow(a))}),a.is_subscribed&&d.set(b("MercuryIDs").getParticipantIDFromUserID(c),b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(c)))})},toggleWorkNotificationJewel:function(){b("Arbiter").inform(i.TOGGLE_NOTIFICATION_DIALOG)},toggleKeyboardShortCutsList:function(a){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("WorkchatAppKeyboardShortcutsDialog.react"),{platform:a})})},toggleInfoPanel:function(){var a=b("MessengerSettingsStore").getSettings().info_sidebar_collapsed;b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:!a})},getCurrentUser:function(){return{isWorkUser:b("CurrentUser").isWorkUser,isEmployee:b("CurrentUser").isEmployee,getID:b("CurrentUser").getID}},getCurrentLocale:function(){return b("CurrentLocale").get()},subscribeToUnseenMessageCount:function(a){var c=b("MercuryThreadInformer").get();c.subscribe("unseen-updated",function(){return a(b("MessengerState.bs").getUnseenUnreadCount(b("CurrentUser").getID()))});c.subscribe("unread-updated",function(){return a(b("MessengerState.bs").getUnseenUnreadCount(b("CurrentUser").getID()))})},enableDesktopNotifs:function(){b("MessengerSettingsActions").changeDesktopNotifs(!0)},onSampleTextFromThread:function(a){__p&&__p();function c(){var c=b("MessengerURIStore").getState().activeThreadID;if(!c)return;b("MessengerState.bs").getThreadMessagesRange(b("CurrentUser").getID(),c,0,10,function(b){b=b.map(function(a){return a.body}).join("\n");a(b)})}c();b("MessengerURIStore").addListener("change",function(){c()})},selectThread:function(a){b("MessengerActions").selectThread("thread:"+a)},newThread:function(){b("MessengerActions").changeDetailView("detail/compose")},searchInChat:function(){var a={preventDefault:function(){}};b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:!1});b("MessengerInfoPanelSearchReact.bs").handleSearchThreadClick(a)},restartURIListener:function(){b("MessengerURIListener").stop(),b("MessengerURIListener").start()},toggleMuteConversation:function(){var a=b("CurrentUser").getID(),c=b("MessengerURIStore").getState().activeThreadID;if(!c)return;var d=b("MessengerState.bs").getThreadMetaNow(a,c);if(!d)return;d=b("MercuryThreadInfo").isMuted(d);a=b("MercuryThreadActions").getForFBID(a);d?a.unmute(c):a.updateMuteSetting(c,-1)},showAppUpdateBanner:function(a){b("MessengerPromotionDataActions").setPromotionData({promotionID:null,promotionContent:g._("A new version is available with improvements and fixes."),primaryActionTitle:g._("Click to Update"),primaryActionCallback:a})}};e.exports=i}),null);